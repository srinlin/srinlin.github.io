---
title: 88돌아다니조
date: 2022-06-15T14:19:12.780Z

categories:
  - DataScience
tags:
  - DataScience
  - pandas
  - seaborn
  - numpy
  - md
toc_label: "프로젝트 페이지"
---

# 프로젝트 소개
Mid project 인구이동을 통한 상권분석

```python
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns
import plotly.express as px
import cufflinks as cf
import json
cf.go_offline(connected=True)
```


<script type="text/javascript">
window.PlotlyConfig = {MathJaxConfig: 'local'};
if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}
if (typeof require !== 'undefined') {
require.undef("plotly");
requirejs.config({
    paths: {
        'plotly': ['https://cdn.plot.ly/plotly-2.12.1.min']
    }
});
require(['plotly'], function(Plotly) {
    window._Plotly = Plotly;
});
}
</script>




```python
def get_font_family():
    """
    시스템 환경에 따른 기본 폰트명을 반환하는 함수
    """
    import platform
    system_name = platform.system()

    if system_name == "Darwin" :
        font_family = "AppleGothic"
    elif system_name == "Windows":
        font_family = "Malgun Gothic"
    else:
        # Linux(colab)
        !apt-get install fonts-nanum -qq  > /dev/null
        !fc-cache -fv

        import matplotlib as mpl
        mpl.font_manager._rebuild()
        findfont = mpl.font_manager.fontManager.findfont
        mpl.font_manager.findfont = findfont
        mpl.backends.backend_agg.findfont = findfont
        
        font_family = "NanumBarunGothic"
    return font_family


# style 설정은 꼭 폰트설정 위에서 합니다.
# style 에 폰트 설정이 들어있으면 한글폰트가 초기화 되어 한글이 깨집니다.
plt.style.use("seaborn")
# 폰트설정
plt.rc("font", family=get_font_family())

# 마이너스폰트 설정
plt.rc("axes", unicode_minus=False)

# 그래프에 retina display 적용
%config InlineBackend.figure_format = 'retina'
```


```python
df = pd.read_csv("data/서울시_우리마을가게_상권분석서비스(신_상권_추정매출)_2021년.csv", encoding="cp949")
df1 = pd.read_csv("data/서울시 우리마을가게 상권분석서비스(상권영역).csv", encoding="cp949", usecols=['상권_코드_명',"시군구_코드",'엑스좌표_값','와이좌표_값'])
df = df.merge(df1, on="상권_코드_명", how="left")


k = pd.read_csv("data/서울시 우리마을가게 상권분석서비스(상권영역).csv", encoding="cp949", usecols=["엑스좌표_값","와이좌표_값"])
k["엑스좌표_값"] = pd.to_numeric(k["엑스좌표_값"], errors="coerce")
k["와이좌표_값"] = pd.to_numeric(k["와이좌표_값"], errors="coerce")

k = k.dropna()
k.index=range(len(k))
k.tail()

from pyproj import Proj, transform
import folium
import pyproj

def project_array(coord, p1_type, p2_type):
    """
    좌표계 변환 함수
     - coord: x, y 좌표 정보가 담긴 NumPy Array
    - p1_type: 입력 좌표계 정보 ex) epsg:5181
    - p2_type: 출력 좌표계 정보 ex) epsg:4326
    """
    p1 = pyproj.Proj(init=p1_type)
    p2 = pyproj.Proj(init=p2_type)
    fx, fy = pyproj.transform(p1, p2, coord[:, 0], coord[:, 1])
    return np.dstack([fx, fy])[0]
coord = np.array(k)
coord


p1_type = "epsg:5181"
p2_type = "epsg:4326"

# project_array() 함수 실행
result = project_array(coord, p1_type, p2_type)
result

k["위도"] = result[:,1]
k["경도"] = result[:,0]


df = df.merge(k, on="엑스좌표_값", how="left")

```

    C:\Users\gusdn\anaconda3\lib\site-packages\pyproj\crs\crs.py:130: FutureWarning:
    
    '+init=<authority>:<code>' syntax is deprecated. '<authority>:<code>' is the preferred initialization method. When making the change, be mindful of axis order changes: https://pyproj4.github.io/pyproj/stable/gotchas.html#axis-order-changes-in-proj-6
    
    C:\Users\gusdn\anaconda3\lib\site-packages\pyproj\crs\crs.py:130: FutureWarning:
    
    '+init=<authority>:<code>' syntax is deprecated. '<authority>:<code>' is the preferred initialization method. When making the change, be mindful of axis order changes: https://pyproj4.github.io/pyproj/stable/gotchas.html#axis-order-changes-in-proj-6
    
    C:\Users\gusdn\AppData\Local\Temp/ipykernel_53472/2372180282.py:27: DeprecationWarning:
    
    This function is deprecated. See: https://pyproj4.github.io/pyproj/stable/gotchas.html#upgrading-to-pyproj-2-from-pyproj-1
    



```python
df2 = pd.read_csv("data/서울시 우리마을가게 상권분석서비스(자치구별 상권변화지표).csv", encoding="cp949", usecols=["시군구_코드","시군구_코드_명"])
```


```python
df = df.merge(df2, on="시군구_코드", how="left")
```


```python
df.sample(3)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>기준_년_코드</th>
      <th>기준_분기_코드</th>
      <th>상권_구분_코드</th>
      <th>상권_구분_코드_명</th>
      <th>상권_코드</th>
      <th>상권_코드_명</th>
      <th>서비스_업종_코드</th>
      <th>서비스_업종_코드_명</th>
      <th>분기당_매출_금액</th>
      <th>분기당_매출_건수</th>
      <th>...</th>
      <th>연령대_50_매출_건수</th>
      <th>연령대_60_이상_매출_건수</th>
      <th>점포수</th>
      <th>엑스좌표_값</th>
      <th>와이좌표_값_x</th>
      <th>시군구_코드</th>
      <th>와이좌표_값_y</th>
      <th>위도</th>
      <th>경도</th>
      <th>시군구_코드_명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>904771</th>
      <td>2021</td>
      <td>1</td>
      <td>D</td>
      <td>발달상권</td>
      <td>2120167</td>
      <td>고속터미널(고속터미널역)</td>
      <td>CS200032</td>
      <td>가전제품수리</td>
      <td>16769997.0</td>
      <td>85</td>
      <td>...</td>
      <td>85</td>
      <td>0</td>
      <td>1</td>
      <td>200352.0</td>
      <td>445060.0</td>
      <td>11650.0</td>
      <td>445060.0</td>
      <td>37.505008</td>
      <td>127.003981</td>
      <td>서초구</td>
    </tr>
    <tr>
      <th>381451</th>
      <td>2021</td>
      <td>1</td>
      <td>A</td>
      <td>골목상권</td>
      <td>2110573</td>
      <td>신촌역 6번</td>
      <td>CS100010</td>
      <td>커피-음료</td>
      <td>6945985.0</td>
      <td>2295</td>
      <td>...</td>
      <td>341</td>
      <td>19</td>
      <td>3</td>
      <td>194606.0</td>
      <td>450433.0</td>
      <td>11440.0</td>
      <td>450433.0</td>
      <td>37.553404</td>
      <td>126.938956</td>
      <td>마포구</td>
    </tr>
    <tr>
      <th>4245628</th>
      <td>2021</td>
      <td>4</td>
      <td>A</td>
      <td>골목상권</td>
      <td>2110975</td>
      <td>매봉역 1번</td>
      <td>CS300010</td>
      <td>반찬가게</td>
      <td>4688458.0</td>
      <td>3</td>
      <td>...</td>
      <td>0</td>
      <td>3</td>
      <td>1</td>
      <td>203995.0</td>
      <td>443091.0</td>
      <td>11680.0</td>
      <td>443091.0</td>
      <td>37.487259</td>
      <td>127.045172</td>
      <td>강남구</td>
    </tr>
  </tbody>
</table>
<p>3 rows × 87 columns</p>
</div>




```python
subset2 = df[['상권_구분_코드_명','시군구_코드_명','분기당_매출_금액']]
subset2
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>상권_구분_코드_명</th>
      <th>시군구_코드_명</th>
      <th>분기당_매출_금액</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>골목상권</td>
      <td>종로구</td>
      <td>626851391.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>골목상권</td>
      <td>종로구</td>
      <td>626851391.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>골목상권</td>
      <td>종로구</td>
      <td>626851391.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>골목상권</td>
      <td>종로구</td>
      <td>626851391.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>골목상권</td>
      <td>종로구</td>
      <td>626851391.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>4818083</th>
      <td>관광특구</td>
      <td>강남구</td>
      <td>10000000.0</td>
    </tr>
    <tr>
      <th>4818084</th>
      <td>관광특구</td>
      <td>강남구</td>
      <td>10000000.0</td>
    </tr>
    <tr>
      <th>4818085</th>
      <td>관광특구</td>
      <td>강남구</td>
      <td>10000000.0</td>
    </tr>
    <tr>
      <th>4818086</th>
      <td>관광특구</td>
      <td>강남구</td>
      <td>10000000.0</td>
    </tr>
    <tr>
      <th>4818087</th>
      <td>관광특구</td>
      <td>강남구</td>
      <td>10000000.0</td>
    </tr>
  </tbody>
</table>
<p>4818088 rows × 3 columns</p>
</div>




```python
golmok = subset2.groupby(['시군구_코드_명','상권_구분_코드_명'])['분기당_매출_금액'].sum()
golmok.iplot(kind='bar')
```




```python
subset = df[['기준_분기_코드','분기당_매출_금액','시군구_코드_명']]
subset
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>기준_분기_코드</th>
      <th>분기당_매출_금액</th>
      <th>시군구_코드_명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>626851391.0</td>
      <td>종로구</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>626851391.0</td>
      <td>종로구</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1</td>
      <td>626851391.0</td>
      <td>종로구</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1</td>
      <td>626851391.0</td>
      <td>종로구</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1</td>
      <td>626851391.0</td>
      <td>종로구</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>4818083</th>
      <td>4</td>
      <td>10000000.0</td>
      <td>강남구</td>
    </tr>
    <tr>
      <th>4818084</th>
      <td>4</td>
      <td>10000000.0</td>
      <td>강남구</td>
    </tr>
    <tr>
      <th>4818085</th>
      <td>4</td>
      <td>10000000.0</td>
      <td>강남구</td>
    </tr>
    <tr>
      <th>4818086</th>
      <td>4</td>
      <td>10000000.0</td>
      <td>강남구</td>
    </tr>
    <tr>
      <th>4818087</th>
      <td>4</td>
      <td>10000000.0</td>
      <td>강남구</td>
    </tr>
  </tbody>
</table>
<p>4818088 rows × 3 columns</p>
</div>




```python
subgb = subset.groupby(['시군구_코드_명','기준_분기_코드'])['분기당_매출_금액'].sum().sort_index()
```


```python
df2 = pd.read_excel('data/상권분석_인구수_2021(1).xlsx')
df2.info()
```

    <class 'pandas.core.frame.DataFrame'>
    RangeIndex: 100 entries, 0 to 99
    Data columns (total 5 columns):
     #   Column    Non-Null Count  Dtype 
    ---  ------    --------------  ----- 
     0   지역        100 non-null    object
     1   분기        100 non-null    object
     2   길단위 유동인구  100 non-null    int64 
     3   주거 인구     100 non-null    int64 
     4   직장 인구     100 non-null    int64 
    dtypes: int64(3), object(2)
    memory usage: 4.0+ KB



```python
df2['지역'] = df2['지역'].astype(str).str.strip()
```


```python
df2['지역'] == '종로구'
```




    0      True
    1     False
    2     False
    3     False
    4     False
          ...  
    95    False
    96    False
    97    False
    98    False
    99    False
    Name: 지역, Length: 100, dtype: bool




```python
subset = df2.groupby(["지역"])['길단위 유동인구'].sum().sort_values()
subset.iplot(kind="bar",color='blue',title='유동인구')
```





```python
subgb2 = df.groupby(['시군구_코드_명'])['분기당_매출_금액'].sum().sort_values()
subgb2.iplot(kind="bar")
```






```python
subgb.iplot(kind="bar",title='분기당 매출 금액')
subset.iplot(kind="bar",color='blue',title='유동인구')
```








# 추창욱


```python
df=pd.read_csv("data/인구_점포_개폐업_통합_2021.csv")
```

데이터 형태 파악


```python
df.shape
```




    (104, 12)



쉼표를 없애주고 데이터 타입을 올바르게 변환


```python
object_list=['전체 점포수','프랜차이즈 점포수','일반 점포수','길단위 유동인구', '개업수', '폐업수']
for i in object_list:
    df[i]=df[i].str.replace(',', '').astype('int64')
```


```python
df['지역'] = df['지역'].str.strip()
```

# 서울의 점포수와 개/폐업, 주거인구, 직장인구 분석

## 서울 구별 전체 점포수, 개업수, 폐업수, 주거 인구, 직장 인구 비교하기
* 서울시 전체에 대한 행은 전부 드랍 후 진행

### 서울시 각 구별 전체 점포수 살펴보기


```python
df_a = df[df['지역'] != '서울시 전체']
```


```python
plt.figure(figsize=(12, 10))
sns.barplot(data=df_a.sort_values('전체 점포수'),x='전체 점포수',y='지역', ci=None)
_ = plt.title('서울시 구별 21년도 전체 점포수')
```


    
![png](/assets/images/source_images//assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_27_0.png)
    


### 서울시 각 구별 전체 개업수 살펴보기


```python
plt.figure(figsize=(12, 10))
sns.barplot(data=df_a.sort_values('개업수'),x='개업수',y='지역', ci=None)
_ = plt.title('서울시 구별 21년도 개업수')
```


    
![png](/assets/images/source_images//assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_29_0.png)
    


### 서울시 각 구별 전체 폐업수 살펴보기


```python
plt.figure(figsize=(12, 10))
sns.barplot(data=df_a.sort_values('폐업수'),x='폐업수',y='지역', ci=None)
_ = plt.title('서울시 구별 21년도 폐업수')
```


    
![png](/assets/images/source_images//assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_31_0.png)
    


### 서울시 각 구별 주거인구 살펴보기


```python
plt.figure(figsize=(12, 10))
sns.barplot(data=df_a.sort_values('주거 인구'),x='주거 인구',y='지역', ci=None)
_ = plt.title('서울시 구별 21년도 주거인구')
```


    
![png](/assets/images/source_images//assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_33_0.png)
    


### 서울시 각 구별 직장인구 살펴보기


```python
plt.figure(figsize=(12, 10))

sns.barplot(data=df_a.sort_values('직장 인구'),x='직장 인구',y='지역', ci=None)
_ = plt.title('서울시 구별 21년도 직장인구')
```


    
![png](/assets/images/source_images//assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_35_0.png)
    


### 구별 전체 점포수 중 프렌차이즈 점포수와 일반 점포수 비율 비교
출처:https://jehyunlee.github.io/2021/10/05/Python-DS-85-popkr/


```python
# 지역별로 그룹화하여 프랜차이즈와 일반 점포수의 평균으로 만든 데이터 프레임
df_a_nf = df_a.groupby('지역')['프랜차이즈 점포수', '일반 점포수'].mean()
```

    C:\Users\gusdn\AppData\Local\Temp/ipykernel_34460/3686639878.py:2: FutureWarning:
    
    Indexing with multiple keys (implicitly converted to a tuple of keys) will be deprecated, use a list instead.
    



```python
# 틀만들기
fig, axs = plt.subplots(ncols=2, sharey=True, 
                        figsize=(10, 8), gridspec_kw={"wspace":0})

c_f = "green"
c_n = "darkorange"

#바 그래프 생성하기
axs[0].barh(df_a_nf.index, df_a_nf["프랜차이즈 점포수"], color=c_f)
axs[1].barh(df_a_nf.index, df_a_nf["일반 점포수"], color=c_n)

#단위 맞쳐주기
xmax = 5500
x2max=65000
axs[0].set_xlim(xmax, 0)
axs[1].set_xlim(0, x2max)

#제목 설정하기
for ax,title in zip(axs,['프랜차이즈 점포수','일반 점포수']):
    ax.set_title(title, color="gray", fontweight="bold", pad=16)

    
#꾸미기
for ax in axs:
    for i, p in enumerate(ax.patches):
        w = p.get_width()
        if ax == axs[0]:
            ha = "right"
            c = c_f
        else:
            ha = "left"
            c = c_n
        
        ax.text(w, i, f" {format(w, ',')} ", 
                c=c, fontsize=13, va="center", ha=ha, 
                fontweight="bold", alpha=0.5)
fig.suptitle("구별 프랜차이즈, 일반 점포수 비교", fontweight="bold")
fig.tight_layout()
```


    
![png](/assets/images/source_images//assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_38_0.png)
    


## 특정 구의 분기별 전체 점포수, 개업률, 폐업률, 길단위 유동인구, 주거/직장 인구수 시각화

### 종로구만 우선 살펴보기


```python
f, axes = plt.subplots(2, 2)
f.set_size_inches((12, 12))
plt.subplots_adjust(wspace = 0.15, hspace = 0.15)

#figure 전체 제목
f.suptitle('종로구', fontsize=15)

#분기별 전체 점포수 변화 선 그래프
df_x=df[df['지역']=='종로구']
axes[0, 0].plot(df_x['분기'],df_x['전체 점포수'], color='blue', marker='o')
axes[0, 0].set_xlabel('분기', fontsize = 11)
axes[0, 0].set_ylabel('전체 점포수', fontsize = 11)
axes[0, 0].set_title('분기별 전체점포수', fontsize = 12)

#분기별 개폐업률 막대 그래프 비교
l1=axes[0,1].bar(df_x['분기'],df_x['개업률'],width=0.5,alpha=0.5, color='red')
l2=axes[0,1].bar(df_x['분기'],df_x['폐업률'],width=0.5,alpha=0.5, color='blue')
axes[0,1].legend([l1,l2],['개업률','폐업률'])
axes[0, 1].set_xlabel('분기', fontsize = 11)
axes[0, 1].set_ylabel('비율 %단위', fontsize = 11)
axes[0, 1].set_title('분기별 개/폐업률\n 빨강:개업률 / 파랑:폐업률', fontsize = 12)

#길단위 인구수
axes[1, 0].plot(df_x['분기'],df_x['길단위 유동인구'], color='red', marker='o')
axes[1, 0].set_xlabel('분기', fontsize = 11)
axes[1, 0].set_ylabel('길단위 유동인구', fontsize = 11)
axes[1, 0].set_title('분기별 길단위 유동인구', fontsize = 12)

#주거, 직장 인구
bar_width = 0.5
index = np.arange(1)
label=['']
l3=axes[1,1].bar(index,df_x['주거 인구'],width=0.5,alpha=0.3, color='green')
l4=axes[1,1].bar(index+bar_width,df_x['직장 인구'],width=0.5,alpha=0.3, color='blue')
axes[1,1].legend([l3,l4],['주거인구','직장인구'])
axes[1, 1].set_xlabel('인구 종류', fontsize = 11)
axes[1, 1].set_ylabel('', fontsize = 11)
axes[1, 1].set_title('주거/직장 인구수', fontsize = 12)


plt.tight_layout()
plt.show()
```


    
![png](/assets/images/source_images//assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_41_0.png)
    


### 위의 코드를 이용하여 함수를 만들어 검색이 가능하도록 작성하기


```python
def total_graph(gu):
    f, axes = plt.subplots(2, 2)
    f.set_size_inches((12, 12))
    plt.subplots_adjust(wspace = 0.15, hspace = 0.15)

    #figure 전체 제목
    f.suptitle( gu , fontsize=15)

    #분기별 전체 점포수 변화 선 그래프
    df_x=df[df['지역']==gu]
    axes[0, 0].plot(df_x['분기'],df_x['전체 점포수'], color='blue', marker='o')
    axes[0, 0].set_xlabel('분기', fontsize = 11)
    axes[0, 0].set_ylabel('전체 점포수', fontsize = 11)
    axes[0, 0].set_title('분기별 전체점포수', fontsize = 12)

    #분기별 개폐업률 막대 그래프 비교
    l1=axes[0,1].bar(df_x['분기'],df_x['개업률'],width=0.5,alpha=0.5, color='red')
    l2=axes[0,1].bar(df_x['분기'],df_x['폐업률'],width=0.5,alpha=0.5, color='blue')
    axes[0,1].legend([l1,l2],['개업률','폐업률'])
    axes[0, 1].set_xlabel('분기', fontsize = 11)
    axes[0, 1].set_ylabel('비율 %단위', fontsize = 11)
    axes[0, 1].set_title('분기별 개/폐업률\n 빨강:개업률 / 파랑:폐업률', fontsize = 12)

    #길단위 인구수
    axes[1, 0].plot(df_x['분기'],df_x['길단위 유동인구'], color='red', marker='o')
    axes[1, 0].set_xlabel('분기', fontsize = 11)
    axes[1, 0].set_ylabel('길단위 유동인구', fontsize = 11)
    axes[1, 0].set_title('분기별 길단위 유동인구', fontsize = 12)

    #주거, 직장 인구
    bar_width = 0.5
    index = np.arange(1)
    label=['']
    l3=axes[1,1].bar(index,df_x['주거 인구'],width=0.5,alpha=0.3, color='green')
    l4=axes[1,1].bar(index+bar_width,df_x['직장 인구'],width=0.5,alpha=0.3, color='blue')
    axes[1,1].legend([l3,l4],['주거인구','직장인구'])
    axes[1, 1].set_xlabel('인구 종류', fontsize = 11)
    axes[1, 1].set_ylabel('', fontsize = 11)
    axes[1, 1].set_title('주거/직장 인구수', fontsize = 12)


    plt.tight_layout()
    return plt.show()
```


```python
gu=input("원하시는 구를 입력해주세요: ")
total_graph(gu)
```

    원하시는 구를 입력해주세요: 강남구



    
![png](/assets/images/source_images//assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_44_1.png)
    


# 이세린


```python
df = pd.read_csv("data/서울시_우리마을가게_상권분석서비스(신_상권_추정매출)_2021년.csv", encoding="cp949")
df1 = pd.read_csv("data/서울시 우리마을가게 상권분석서비스(상권영역).csv", encoding="cp949", usecols=['상권_코드_명',"시군구_코드",'엑스좌표_값','와이좌표_값'])
df = df.merge(df1, on="상권_코드_명", how="left")


k = pd.read_csv("data/서울시 우리마을가게 상권분석서비스(상권영역).csv", encoding="cp949", usecols=["엑스좌표_값","와이좌표_값"])
k["엑스좌표_값"] = pd.to_numeric(k["엑스좌표_값"], errors="coerce")
k["와이좌표_값"] = pd.to_numeric(k["와이좌표_값"], errors="coerce")

k = k.dropna()
k.index=range(len(k))
k.tail()

from pyproj import Proj, transform
import folium
import pyproj

def project_array(coord, p1_type, p2_type):
    """
    좌표계 변환 함수
     - coord: x, y 좌표 정보가 담긴 NumPy Array
    - p1_type: 입력 좌표계 정보 ex) epsg:5181
    - p2_type: 출력 좌표계 정보 ex) epsg:4326
    """
    p1 = pyproj.Proj(init=p1_type)
    p2 = pyproj.Proj(init=p2_type)
    fx, fy = pyproj.transform(p1, p2, coord[:, 0], coord[:, 1])
    return np.dstack([fx, fy])[0]
coord = np.array(k)
coord


p1_type = "epsg:5181"
p2_type = "epsg:4326"

# project_array() 함수 실행
result = project_array(coord, p1_type, p2_type)
result

k["위도"] = result[:,1]
k["경도"] = result[:,0]


df = df.merge(k, on="엑스좌표_값", how="left")
```

    C:\Users\gusdn\anaconda3\lib\site-packages\pyproj\crs\crs.py:130: FutureWarning:
    
    '+init=<authority>:<code>' syntax is deprecated. '<authority>:<code>' is the preferred initialization method. When making the change, be mindful of axis order changes: https://pyproj4.github.io/pyproj/stable/gotchas.html#axis-order-changes-in-proj-6
    
    C:\Users\gusdn\anaconda3\lib\site-packages\pyproj\crs\crs.py:130: FutureWarning:
    
    '+init=<authority>:<code>' syntax is deprecated. '<authority>:<code>' is the preferred initialization method. When making the change, be mindful of axis order changes: https://pyproj4.github.io/pyproj/stable/gotchas.html#axis-order-changes-in-proj-6
    
    C:\Users\gusdn\AppData\Local\Temp/ipykernel_53472/1975609316.py:27: DeprecationWarning:
    
    This function is deprecated. See: https://pyproj4.github.io/pyproj/stable/gotchas.html#upgrading-to-pyproj-2-from-pyproj-1
    



```python
df2 = pd.read_csv("data/서울시 우리마을가게 상권분석서비스(자치구별 상권변화지표).csv", encoding="cp949", usecols=["시군구_코드","시군구_코드_명"])
df2 = df2.drop_duplicates()
```


```python
df = df.merge(df2, on="시군구_코드", how="left") #시구군 코드와 시구군명 컬럼을 합침
df
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>기준_년_코드</th>
      <th>기준_분기_코드</th>
      <th>상권_구분_코드</th>
      <th>상권_구분_코드_명</th>
      <th>상권_코드</th>
      <th>상권_코드_명</th>
      <th>서비스_업종_코드</th>
      <th>서비스_업종_코드_명</th>
      <th>분기당_매출_금액</th>
      <th>분기당_매출_건수</th>
      <th>...</th>
      <th>연령대_50_매출_건수</th>
      <th>연령대_60_이상_매출_건수</th>
      <th>점포수</th>
      <th>엑스좌표_값</th>
      <th>와이좌표_값_x</th>
      <th>시군구_코드</th>
      <th>와이좌표_값_y</th>
      <th>위도</th>
      <th>경도</th>
      <th>시군구_코드_명</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2021</td>
      <td>1</td>
      <td>A</td>
      <td>골목상권</td>
      <td>2110001</td>
      <td>이북5도청사</td>
      <td>CS100001</td>
      <td>한식음식점</td>
      <td>6.268514e+08</td>
      <td>25502</td>
      <td>...</td>
      <td>7792</td>
      <td>7568</td>
      <td>28</td>
      <td>196193.0</td>
      <td>456641.0</td>
      <td>11110.0</td>
      <td>456641.0</td>
      <td>37.609345</td>
      <td>126.956884</td>
      <td>종로구</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2021</td>
      <td>1</td>
      <td>A</td>
      <td>골목상권</td>
      <td>2110001</td>
      <td>이북5도청사</td>
      <td>CS100008</td>
      <td>분식전문점</td>
      <td>1.229571e+08</td>
      <td>12039</td>
      <td>...</td>
      <td>3404</td>
      <td>2670</td>
      <td>9</td>
      <td>196193.0</td>
      <td>456641.0</td>
      <td>11110.0</td>
      <td>456641.0</td>
      <td>37.609345</td>
      <td>126.956884</td>
      <td>종로구</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2021</td>
      <td>1</td>
      <td>A</td>
      <td>골목상권</td>
      <td>2110001</td>
      <td>이북5도청사</td>
      <td>CS100009</td>
      <td>호프-간이주점</td>
      <td>5.093349e+06</td>
      <td>177</td>
      <td>...</td>
      <td>62</td>
      <td>71</td>
      <td>3</td>
      <td>196193.0</td>
      <td>456641.0</td>
      <td>11110.0</td>
      <td>456641.0</td>
      <td>37.609345</td>
      <td>126.956884</td>
      <td>종로구</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2021</td>
      <td>1</td>
      <td>A</td>
      <td>골목상권</td>
      <td>2110001</td>
      <td>이북5도청사</td>
      <td>CS100010</td>
      <td>커피-음료</td>
      <td>1.350773e+07</td>
      <td>1359</td>
      <td>...</td>
      <td>288</td>
      <td>235</td>
      <td>5</td>
      <td>196193.0</td>
      <td>456641.0</td>
      <td>11110.0</td>
      <td>456641.0</td>
      <td>37.609345</td>
      <td>126.956884</td>
      <td>종로구</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2021</td>
      <td>1</td>
      <td>A</td>
      <td>골목상권</td>
      <td>2110001</td>
      <td>이북5도청사</td>
      <td>CS200001</td>
      <td>일반교습학원</td>
      <td>3.755138e+07</td>
      <td>128</td>
      <td>...</td>
      <td>8</td>
      <td>16</td>
      <td>3</td>
      <td>196193.0</td>
      <td>456641.0</td>
      <td>11110.0</td>
      <td>456641.0</td>
      <td>37.609345</td>
      <td>126.956884</td>
      <td>종로구</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>150251</th>
      <td>2021</td>
      <td>4</td>
      <td>U</td>
      <td>관광특구</td>
      <td>1001496</td>
      <td>강남 마이스 관광특구</td>
      <td>CS300028</td>
      <td>화초</td>
      <td>9.971574e+08</td>
      <td>14124</td>
      <td>...</td>
      <td>1194</td>
      <td>1328</td>
      <td>5</td>
      <td>205310.0</td>
      <td>445727.0</td>
      <td>11680.0</td>
      <td>445727.0</td>
      <td>37.511003</td>
      <td>127.060059</td>
      <td>강남구</td>
    </tr>
    <tr>
      <th>150252</th>
      <td>2021</td>
      <td>4</td>
      <td>U</td>
      <td>관광특구</td>
      <td>1001496</td>
      <td>강남 마이스 관광특구</td>
      <td>CS300031</td>
      <td>가구</td>
      <td>1.191179e+10</td>
      <td>6524</td>
      <td>...</td>
      <td>1634</td>
      <td>2880</td>
      <td>6</td>
      <td>205310.0</td>
      <td>445727.0</td>
      <td>11680.0</td>
      <td>445727.0</td>
      <td>37.511003</td>
      <td>127.060059</td>
      <td>강남구</td>
    </tr>
    <tr>
      <th>150253</th>
      <td>2021</td>
      <td>4</td>
      <td>U</td>
      <td>관광특구</td>
      <td>1001496</td>
      <td>강남 마이스 관광특구</td>
      <td>CS300032</td>
      <td>가전제품</td>
      <td>1.717077e+09</td>
      <td>8760</td>
      <td>...</td>
      <td>926</td>
      <td>2021</td>
      <td>8</td>
      <td>205310.0</td>
      <td>445727.0</td>
      <td>11680.0</td>
      <td>445727.0</td>
      <td>37.511003</td>
      <td>127.060059</td>
      <td>강남구</td>
    </tr>
    <tr>
      <th>150254</th>
      <td>2021</td>
      <td>4</td>
      <td>U</td>
      <td>관광특구</td>
      <td>1001496</td>
      <td>강남 마이스 관광특구</td>
      <td>CS300035</td>
      <td>인테리어</td>
      <td>1.256692e+07</td>
      <td>370</td>
      <td>...</td>
      <td>370</td>
      <td>0</td>
      <td>4</td>
      <td>205310.0</td>
      <td>445727.0</td>
      <td>11680.0</td>
      <td>445727.0</td>
      <td>37.511003</td>
      <td>127.060059</td>
      <td>강남구</td>
    </tr>
    <tr>
      <th>150255</th>
      <td>2021</td>
      <td>4</td>
      <td>U</td>
      <td>관광특구</td>
      <td>1001496</td>
      <td>강남 마이스 관광특구</td>
      <td>CS300043</td>
      <td>전자상거래업</td>
      <td>1.000000e+07</td>
      <td>94</td>
      <td>...</td>
      <td>17</td>
      <td>0</td>
      <td>8</td>
      <td>205310.0</td>
      <td>445727.0</td>
      <td>11680.0</td>
      <td>445727.0</td>
      <td>37.511003</td>
      <td>127.060059</td>
      <td>강남구</td>
    </tr>
  </tbody>
</table>
<p>150256 rows × 87 columns</p>
</div>




```python
#지역, 요일별 매출액 추이

df_gu_day = df[["시군구_코드_명","월요일_매출_금액","화요일_매출_금액","수요일_매출_금액","목요일_매출_금액","금요일_매출_금액","토요일_매출_금액","일요일_매출_금액"]]
df_gu = df_gu_day.melt(id_vars ="시군구_코드_명", var_name="요일", value_name="매출액")
df_gu

plt.figure(figsize=(16, 12))
sns.lineplot(data=df_gu, x="요일", y="매출액", hue='시군구_코드_명', markers=True, ci=None, style="시군구_코드_명")
plt.title('서울시 지역구, 요일별 매출액 추이')
plt.legend(bbox_to_anchor=(1,1))
```




    <matplotlib.legend.Legend at 0x17f53146d00>




    
![png](/assets/images/source_images//assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_49_1.png)
    



```python
#지역,요일별 매출비율 추이

df_gu_ratio = df[["시군구_코드_명","월요일_매출_비율","화요일_매출_비율","수요일_매출_비율","목요일_매출_비율","금요일_매출_비율","토요일_매출_비율","일요일_매출_비율"]]
df_gu_ratio = df_gu_ratio.melt(id_vars ="시군구_코드_명", var_name="요일", value_name="매출비율")
df_gu_ratio

plt.figure(figsize=(16, 12))
sns.lineplot(data=df_gu_ratio, x="요일", y="매출비율", hue='시군구_코드_명', markers=True, ci=None, style="시군구_코드_명")
plt.title('서울시 지역구, 요일별 매출비율 추이')
plt.legend(bbox_to_anchor=(1,1))
```




    <matplotlib.legend.Legend at 0x17f538d5eb0>




    
![png](/assets/images/source_images//assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_50_1.png)
    



```python
#지역, 요일별 매출 건수 추이
df_gu_count = df[["시군구_코드_명","월요일_매출_건수","화요일_매출_건수","수요일_매출_건수","목요일_매출_건수","금요일_매출_건수","토요일_매출_건수","일요일_매출_건수"]]
df_gu_count = df_gu_count.melt(id_vars ="시군구_코드_명", var_name="요일", value_name="매출건수")
df_gu_count

plt.figure(figsize=(16, 12))
sns.lineplot(data=df_gu_count, x="요일", y="매출건수", hue='시군구_코드_명', markers=True, ci=None, style="시군구_코드_명")
plt.title('서울시 지역구, 요일별 매출건수 추이')
plt.legend(bbox_to_anchor=(1,1))
```




    <matplotlib.legend.Legend at 0x17f532c5a30>




    
![png](/assets/images/source_images//assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_51_1.png)
    



```python
m = pd.pivot_table(df_gu_count, index = "요일", columns="시군구_코드_명", values = "매출건수").round()
plt.figure(figsize=(28,8))
sns.heatmap(m, linewidths = 0.4, # 선의 굵기
            linecolor = 'white', # 선의 색깔

            annot = True,      # 실제 값 화면에 나타내기
               cmap = 'RdYlBu_r',  # Red, Yellow, Blue 색상으로 표시
            # 소수점 포맷팅 형태
)
plt.xticks(fontsize=8,rotation= 0) 
plt.title('요일별, 지역별 매출건수 히트맵', fontsize=20)
```




    Text(0.5, 1.0, '요일별, 지역별 매출건수 히트맵')




    
![png](/assets/images/source_images//assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_52_1.png)
    



```python
geo_path = 'data/seoul_municipalities_geo_simple.json'
print(geo_path)

geo_json = json.load(open(geo_path, encoding="utf-8"))
df_pop = pd.read_csv("data/인구_점포_개폐업_통합_2021.csv",encoding = 'UTF-8')  #인구수 파일이어서 변수명을 popular의 Pop으로
df_pop
df_popular= df_pop.groupby("지역")["직장 인구"].sum().reset_index()
df_popular['지역']=df_popular['지역'].str.strip() #인구수 csv 파일에서 지역명앞에 한칸 띄어져있어서 strip해줌
df_popular #choropleth 그리기 위해서 필요한 데이터
```

    data/seoul_municipalities_geo_simple.json





<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>지역</th>
      <th>직장 인구</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>강남구</td>
      <td>1172</td>
    </tr>
    <tr>
      <th>1</th>
      <td>강동구</td>
      <td>116</td>
    </tr>
    <tr>
      <th>2</th>
      <td>강북구</td>
      <td>48</td>
    </tr>
    <tr>
      <th>3</th>
      <td>강서구</td>
      <td>140</td>
    </tr>
    <tr>
      <th>4</th>
      <td>관악구</td>
      <td>100</td>
    </tr>
    <tr>
      <th>5</th>
      <td>광진구</td>
      <td>184</td>
    </tr>
    <tr>
      <th>6</th>
      <td>구로구</td>
      <td>280</td>
    </tr>
    <tr>
      <th>7</th>
      <td>금천구</td>
      <td>400</td>
    </tr>
    <tr>
      <th>8</th>
      <td>노원구</td>
      <td>64</td>
    </tr>
    <tr>
      <th>9</th>
      <td>도봉구</td>
      <td>68</td>
    </tr>
    <tr>
      <th>10</th>
      <td>동대문구</td>
      <td>220</td>
    </tr>
    <tr>
      <th>11</th>
      <td>동작구</td>
      <td>176</td>
    </tr>
    <tr>
      <th>12</th>
      <td>마포구</td>
      <td>232</td>
    </tr>
    <tr>
      <th>13</th>
      <td>서대문구</td>
      <td>152</td>
    </tr>
    <tr>
      <th>14</th>
      <td>서초구</td>
      <td>484</td>
    </tr>
    <tr>
      <th>15</th>
      <td>성동구</td>
      <td>196</td>
    </tr>
    <tr>
      <th>16</th>
      <td>성북구</td>
      <td>180</td>
    </tr>
    <tr>
      <th>17</th>
      <td>송파구</td>
      <td>476</td>
    </tr>
    <tr>
      <th>18</th>
      <td>양천구</td>
      <td>312</td>
    </tr>
    <tr>
      <th>19</th>
      <td>영등포구</td>
      <td>740</td>
    </tr>
    <tr>
      <th>20</th>
      <td>용산구</td>
      <td>332</td>
    </tr>
    <tr>
      <th>21</th>
      <td>은평구</td>
      <td>64</td>
    </tr>
    <tr>
      <th>22</th>
      <td>종로구</td>
      <td>396</td>
    </tr>
    <tr>
      <th>23</th>
      <td>중구</td>
      <td>1344</td>
    </tr>
    <tr>
      <th>24</th>
      <td>중랑구</td>
      <td>88</td>
    </tr>
    <tr>
      <th>25</th>
      <td>서울시 전체</td>
      <td>316</td>
    </tr>
  </tbody>
</table>
</div>




```python
m = folium.Map(location=[df["위도"].mean(), df["경도"].mean()], zoom_start=12)



folium.Choropleth(
    geo_data=geo_json,
    name="choropleth",
    data=df_popular,
    columns=["지역","직장 인구"],
    key_on="feature.properties.name",
    fill_color = "YlGn",
    fill_opacity=0.8,
    line_opacity = 0.2,
    legend_name="직장인구 수",
).add_to(m)
m
```






# 음이레


```python
df = pd.read_csv("data/인구_점포_개폐업_통합_2021.csv")
df
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>지역</th>
      <th>분기</th>
      <th>전체 점포수</th>
      <th>프랜차이즈 점포수</th>
      <th>일반 점포수</th>
      <th>길단위 유동인구</th>
      <th>주거 인구</th>
      <th>직장 인구</th>
      <th>개업수</th>
      <th>폐업수</th>
      <th>개업률</th>
      <th>폐업률</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>서울시 전체</td>
      <td>1분기</td>
      <td>571,107</td>
      <td>45,959</td>
      <td>525,148</td>
      <td>37,002</td>
      <td>159</td>
      <td>79</td>
      <td>11,979</td>
      <td>12,372</td>
      <td>2.1</td>
      <td>2.2</td>
    </tr>
    <tr>
      <th>1</th>
      <td>종로구</td>
      <td>1분기</td>
      <td>24,918</td>
      <td>1,510</td>
      <td>23,408</td>
      <td>19,869</td>
      <td>63</td>
      <td>99</td>
      <td>381</td>
      <td>454</td>
      <td>1.5</td>
      <td>1.8</td>
    </tr>
    <tr>
      <th>2</th>
      <td>중구</td>
      <td>1분기</td>
      <td>38,406</td>
      <td>1,955</td>
      <td>36,451</td>
      <td>44,917</td>
      <td>126</td>
      <td>336</td>
      <td>388</td>
      <td>796</td>
      <td>1.0</td>
      <td>2.1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>용산구</td>
      <td>1분기</td>
      <td>18,696</td>
      <td>1,171</td>
      <td>17,525</td>
      <td>25,994</td>
      <td>108</td>
      <td>83</td>
      <td>310</td>
      <td>388</td>
      <td>1.7</td>
      <td>2.1</td>
    </tr>
    <tr>
      <th>4</th>
      <td>성동구</td>
      <td>1분기</td>
      <td>17,085</td>
      <td>1,338</td>
      <td>15,747</td>
      <td>39,264</td>
      <td>177</td>
      <td>49</td>
      <td>389</td>
      <td>351</td>
      <td>2.3</td>
      <td>2.1</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>99</th>
      <td>관악구</td>
      <td>4분기</td>
      <td>19,773</td>
      <td>1,860</td>
      <td>17,913</td>
      <td>41,614</td>
      <td>166</td>
      <td>25</td>
      <td>574</td>
      <td>522</td>
      <td>2.9</td>
      <td>2.6</td>
    </tr>
    <tr>
      <th>100</th>
      <td>서초구</td>
      <td>4분기</td>
      <td>36,098</td>
      <td>2,461</td>
      <td>33,637</td>
      <td>19,960</td>
      <td>89</td>
      <td>121</td>
      <td>655</td>
      <td>710</td>
      <td>1.8</td>
      <td>2.0</td>
    </tr>
    <tr>
      <th>101</th>
      <td>강남구</td>
      <td>4분기</td>
      <td>56,120</td>
      <td>4,158</td>
      <td>51,962</td>
      <td>34,124</td>
      <td>141</td>
      <td>293</td>
      <td>1,375</td>
      <td>1,067</td>
      <td>2.5</td>
      <td>1.9</td>
    </tr>
    <tr>
      <th>102</th>
      <td>송파구</td>
      <td>4분기</td>
      <td>37,495</td>
      <td>3,060</td>
      <td>34,435</td>
      <td>35,691</td>
      <td>199</td>
      <td>119</td>
      <td>935</td>
      <td>814</td>
      <td>2.5</td>
      <td>2.2</td>
    </tr>
    <tr>
      <th>103</th>
      <td>강동구</td>
      <td>4분기</td>
      <td>21,166</td>
      <td>1,931</td>
      <td>19,235</td>
      <td>43,748</td>
      <td>180</td>
      <td>29</td>
      <td>577</td>
      <td>516</td>
      <td>2.7</td>
      <td>2.4</td>
    </tr>
  </tbody>
</table>
<p>104 rows × 12 columns</p>
</div>




```python
# 서울 구별 면적 데이터
df2 = pd.read_csv("data/행정구역_구별__20220610170356.csv", encoding='cp949')
df2=df2[["자치구","2019"]]
df2.columns=["지역","면적"]
```

# 전처리


```python
# 결측치 확인
df.isnull().sum()
```




    지역           0
    분기           0
    전체 점포수       0
    프랜차이즈 점포수    0
    일반 점포수       0
    길단위 유동인구     0
    주거 인구        0
    직장 인구        0
    개업수          0
    폐업수          0
    개업률          0
    폐업률          0
    dtype: int64




```python
df.shape
```




    (104, 12)




```python
df[df.duplicated()]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>지역</th>
      <th>분기</th>
      <th>전체 점포수</th>
      <th>프랜차이즈 점포수</th>
      <th>일반 점포수</th>
      <th>길단위 유동인구</th>
      <th>주거 인구</th>
      <th>직장 인구</th>
      <th>개업수</th>
      <th>폐업수</th>
      <th>개업률</th>
      <th>폐업률</th>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table>
</div>




```python
df.info()
```

    <class 'pandas.core.frame.DataFrame'>
    RangeIndex: 104 entries, 0 to 103
    Data columns (total 12 columns):
     #   Column     Non-Null Count  Dtype  
    ---  ------     --------------  -----  
     0   지역         104 non-null    object 
     1   분기         104 non-null    object 
     2   전체 점포수     104 non-null    object 
     3   프랜차이즈 점포수  104 non-null    object 
     4   일반 점포수     104 non-null    object 
     5   길단위 유동인구   104 non-null    object 
     6   주거 인구      104 non-null    int64  
     7   직장 인구      104 non-null    int64  
     8   개업수        104 non-null    object 
     9   폐업수        104 non-null    object 
     10  개업률        104 non-null    float64
     11  폐업률        104 non-null    float64
    dtypes: float64(2), int64(2), object(8)
    memory usage: 9.9+ KB



```python
# 지역에 있는 \xa0 제거
df['지역'] = df['지역'].apply(lambda x: str(x).replace(u'\xa0', u''))
```


```python
# 쉼표 삭제하고 int로 형변환
def remove_comma(x):
    return x.replace(',', '')

columns = ["전체 점포수", "프랜차이즈 점포수","일반 점포수","길단위 유동인구", "개업수", "폐업수"]

for column in columns:
    df[column]=df[column].apply(remove_comma).astype(int)
```


```python
# 분기 숫자로 바꾸기
def make_qt(x):
    return x.replace("분기","")

# df["분기"] = df["분기"].apply(make_qt).astype(int)
# 분기 바꿀 필요가 없어보여서 삭제
```


```python
# 데이터 타입 재확인
df.info()
```

    <class 'pandas.core.frame.DataFrame'>
    RangeIndex: 104 entries, 0 to 103
    Data columns (total 12 columns):
     #   Column     Non-Null Count  Dtype  
    ---  ------     --------------  -----  
     0   지역         104 non-null    object 
     1   분기         104 non-null    object 
     2   전체 점포수     104 non-null    int32  
     3   프랜차이즈 점포수  104 non-null    int32  
     4   일반 점포수     104 non-null    int32  
     5   길단위 유동인구   104 non-null    int32  
     6   주거 인구      104 non-null    int64  
     7   직장 인구      104 non-null    int64  
     8   개업수        104 non-null    int32  
     9   폐업수        104 non-null    int32  
     10  개업률        104 non-null    float64
     11  폐업률        104 non-null    float64
    dtypes: float64(2), int32(6), int64(2), object(2)
    memory usage: 7.4+ KB



```python
df.head()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>지역</th>
      <th>분기</th>
      <th>전체 점포수</th>
      <th>프랜차이즈 점포수</th>
      <th>일반 점포수</th>
      <th>길단위 유동인구</th>
      <th>주거 인구</th>
      <th>직장 인구</th>
      <th>개업수</th>
      <th>폐업수</th>
      <th>개업률</th>
      <th>폐업률</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>서울시 전체</td>
      <td>1분기</td>
      <td>571107</td>
      <td>45959</td>
      <td>525148</td>
      <td>37002</td>
      <td>159</td>
      <td>79</td>
      <td>11979</td>
      <td>12372</td>
      <td>2.1</td>
      <td>2.2</td>
    </tr>
    <tr>
      <th>1</th>
      <td>종로구</td>
      <td>1분기</td>
      <td>24918</td>
      <td>1510</td>
      <td>23408</td>
      <td>19869</td>
      <td>63</td>
      <td>99</td>
      <td>381</td>
      <td>454</td>
      <td>1.5</td>
      <td>1.8</td>
    </tr>
    <tr>
      <th>2</th>
      <td>중구</td>
      <td>1분기</td>
      <td>38406</td>
      <td>1955</td>
      <td>36451</td>
      <td>44917</td>
      <td>126</td>
      <td>336</td>
      <td>388</td>
      <td>796</td>
      <td>1.0</td>
      <td>2.1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>용산구</td>
      <td>1분기</td>
      <td>18696</td>
      <td>1171</td>
      <td>17525</td>
      <td>25994</td>
      <td>108</td>
      <td>83</td>
      <td>310</td>
      <td>388</td>
      <td>1.7</td>
      <td>2.1</td>
    </tr>
    <tr>
      <th>4</th>
      <td>성동구</td>
      <td>1분기</td>
      <td>17085</td>
      <td>1338</td>
      <td>15747</td>
      <td>39264</td>
      <td>177</td>
      <td>49</td>
      <td>389</td>
      <td>351</td>
      <td>2.3</td>
      <td>2.1</td>
    </tr>
  </tbody>
</table>
</div>




```python
# 면적 데이터 추가
df = pd.merge(df,df2,on="지역",how="left")
```


```python
# 점포수를 인구수처럼 면적당으로 바꿔줌
df["전체 점포수"] = df["전체 점포수"] / df["면적"]
```

# 총인구수 데이터 추가
총인구 = 유동인구 + 주거인구 + 직장인구


```python
df["총인구"]=df["길단위 유동인구"]+df["주거 인구"]+df["직장 인구"]
```


```python
df["지역"].unique()
```




    array(['서울시 전체', '종로구', '중구', '용산구', '성동구', '광진구', '동대문구', '중랑구', '성북구',
           '강북구', '도봉구', '노원구', '은평구', '서대문구', '마포구', '양천구', '강서구', '구로구',
           '금천구', '영등포구', '동작구', '관악구', '서초구', '강남구', '송파구', '강동구'],
          dtype=object)




```python
# 서울 전체 평균 확인해보기
df_seoul = df[df["지역"] == "서울시 전체"][["분기","전체 점포수","총인구"]]
df_seoul
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>분기</th>
      <th>전체 점포수</th>
      <th>총인구</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1분기</td>
      <td>943.604190</td>
      <td>37240</td>
    </tr>
    <tr>
      <th>26</th>
      <td>2분기</td>
      <td>945.200251</td>
      <td>36915</td>
    </tr>
    <tr>
      <th>52</th>
      <td>3분기</td>
      <td>945.073029</td>
      <td>36324</td>
    </tr>
    <tr>
      <th>78</th>
      <td>4분기</td>
      <td>946.079241</td>
      <td>36476</td>
    </tr>
  </tbody>
</table>
</div>



# 상관계수 확인


```python
def df_corr(data, col):
    corr = data[["전체 점포수", "총인구"]].corr()
    corr_df = corr[[col]].drop([col], axis=0)    
    return corr_df
```


```python
df_corr(df_seoul,"총인구")
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>총인구</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>전체 점포수</th>
      <td>-0.760891</td>
    </tr>
  </tbody>
</table>
</div>




```python
df_corr(df,"총인구")
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>총인구</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>전체 점포수</th>
      <td>0.271541</td>
    </tr>
  </tbody>
</table>
</div>




```python
# 전체 점포수와 인구 항목별 상관계수 확인
# 피어슨 상관계수
corr_df = df.groupby(df["지역"])[["전체 점포수","길단위 유동인구", "주거 인구","직장 인구"]].mean()
corr_df.corr(method='spearman')["전체 점포수"][1:].to_frame()
# corr_df.corr()["전체 점포수"][1:].to_frame()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>전체 점포수</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>길단위 유동인구</th>
      <td>0.358632</td>
    </tr>
    <tr>
      <th>주거 인구</th>
      <td>0.308824</td>
    </tr>
    <tr>
      <th>직장 인구</th>
      <td>0.740639</td>
    </tr>
  </tbody>
</table>
</div>




```python
def draw_pop_mar(df, dtitle):
    fig, ax0 = plt.subplots()
    ax1 = ax0.twinx()

    df.plot(x="분기", y="전체 점포수", title=dtitle,figsize = (12,4), ax=ax0)
    df.plot(x="분기", y="총인구",color = 'green', ax=ax1)
```


```python
for place in df["지역"].unique():
    draw_pop_mar(df[df["지역"] == place][["분기","전체 점포수","총인구"]], place)
```

    C:\Users\gusdn\AppData\Local\Temp/ipykernel_34460/2958930362.py:2: RuntimeWarning:
    
    More than 20 figures have been opened. Figures created through the pyplot interface (`matplotlib.pyplot.figure`) are retained until explicitly closed and may consume too much memory. (To control this warning, see the rcParam `figure.max_open_warning`).
    



    
![png](/assets/images/source_images//assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_80_1.png)
    



    
![png](/assets/images/source_images//assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_80_2.png)
    



    
![png](/assets/images/source_images//assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_80_3.png)
    



    
![png](/assets/images/source_images//assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_80_4.png)
    



    
![png](/assets/images/source_images//assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_80_5.png)
    



    
![png](/assets/images/source_images//assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_80_6.png)
    



    
![png](/assets/images/source_images//assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_80_7.png)
    



    
![png](/assets/images/source_images//assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_80_8.png)
    



    
![png](/assets/images/source_images//assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_80_9.png)
    



    
![png](/assets/images/source_images//assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_80_10.png)
    



    
![png](/assets/images/source_images//assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_80_11.png)
    



    
![png](/assets/images/source_images//assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_80_12.png)
    



    
![png](/assets/images/source_images//assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_80_13.png)
    



    
![png](/assets/images/source_images//assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_80_14.png)
    



    
![png](/assets/images/source_images//assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_80_15.png)
    



    
![png](/assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_80_16.png)
    



    
![png](/assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_80_17.png)
    



    
![png](/assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_80_18.png)
    



    
![png](/assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_80_19.png)
    



    
![png](/assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_80_20.png)
    



    
![png](/assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_80_21.png)
    



    
![png](/assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_80_22.png)
    



    
![png](/assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_80_23.png)
    



    
![png](/assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_80_24.png)
    



    
![png](/assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_80_25.png)
    



    
![png](/assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_80_26.png)
    



```python
pop_mar = {}
for place in df["지역"].unique():
    pop_mar[place]=(df[df["지역"] == place][["전체 점포수", "총인구"]].corr()["총인구"]["전체 점포수"])
    
pop_mar
```




    {'서울시 전체': -0.7608912843051125,
     '종로구': -0.13360463445232673,
     '중구': 0.12515242297357973,
     '용산구': 0.43454069045100524,
     '성동구': -0.5091132379019924,
     '광진구': -0.7531054961350307,
     '동대문구': 0.29748343613058564,
     '중랑구': -0.9868185229408115,
     '성북구': -0.30077073927240383,
     '강북구': -0.42458589112789363,
     '도봉구': -0.9618784590518648,
     '노원구': -0.34184653653684777,
     '은평구': -0.8784785790641286,
     '서대문구': 0.05357931294055026,
     '마포구': -0.559866257057662,
     '양천구': -0.9746124243377627,
     '강서구': -0.9986307643355192,
     '구로구': -0.9819110310893646,
     '금천구': -0.6384283442533741,
     '영등포구': 0.38415777777975363,
     '동작구': 0.7567968562625069,
     '관악구': -0.6984453781512456,
     '서초구': -0.41802273155536435,
     '강남구': -0.27713046560371485,
     '송파구': -0.9242676172720454,
     '강동구': 0.35552086624145585}




```python
df_pop_mar = pd.DataFrame.from_dict(pop_mar, orient='index').rename(columns={0:"상관계수"})
df_pop_mar
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>상관계수</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>서울시 전체</th>
      <td>-0.760891</td>
    </tr>
    <tr>
      <th>종로구</th>
      <td>-0.133605</td>
    </tr>
    <tr>
      <th>중구</th>
      <td>0.125152</td>
    </tr>
    <tr>
      <th>용산구</th>
      <td>0.434541</td>
    </tr>
    <tr>
      <th>성동구</th>
      <td>-0.509113</td>
    </tr>
    <tr>
      <th>광진구</th>
      <td>-0.753105</td>
    </tr>
    <tr>
      <th>동대문구</th>
      <td>0.297483</td>
    </tr>
    <tr>
      <th>중랑구</th>
      <td>-0.986819</td>
    </tr>
    <tr>
      <th>성북구</th>
      <td>-0.300771</td>
    </tr>
    <tr>
      <th>강북구</th>
      <td>-0.424586</td>
    </tr>
    <tr>
      <th>도봉구</th>
      <td>-0.961878</td>
    </tr>
    <tr>
      <th>노원구</th>
      <td>-0.341847</td>
    </tr>
    <tr>
      <th>은평구</th>
      <td>-0.878479</td>
    </tr>
    <tr>
      <th>서대문구</th>
      <td>0.053579</td>
    </tr>
    <tr>
      <th>마포구</th>
      <td>-0.559866</td>
    </tr>
    <tr>
      <th>양천구</th>
      <td>-0.974612</td>
    </tr>
    <tr>
      <th>강서구</th>
      <td>-0.998631</td>
    </tr>
    <tr>
      <th>구로구</th>
      <td>-0.981911</td>
    </tr>
    <tr>
      <th>금천구</th>
      <td>-0.638428</td>
    </tr>
    <tr>
      <th>영등포구</th>
      <td>0.384158</td>
    </tr>
    <tr>
      <th>동작구</th>
      <td>0.756797</td>
    </tr>
    <tr>
      <th>관악구</th>
      <td>-0.698445</td>
    </tr>
    <tr>
      <th>서초구</th>
      <td>-0.418023</td>
    </tr>
    <tr>
      <th>강남구</th>
      <td>-0.277130</td>
    </tr>
    <tr>
      <th>송파구</th>
      <td>-0.924268</td>
    </tr>
    <tr>
      <th>강동구</th>
      <td>0.355521</td>
    </tr>
  </tbody>
</table>
</div>




```python
df_pop_mar.plot.barh(title="지역별 인구수와 점포수 상관관계", figsize=(12,10), rot = 0, color="orange")
```




    <AxesSubplot:title={'center':'지역별 인구수와 점포수 상관관계'}>




    
![png](/assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_83_1.png)
    


# 지역별 인구 종목 비율


```python
# 유동인구 비율 데이터 추가
df["유동인구 비율"] = df["길단위 유동인구"] / df["총인구"] *100
df["직장인구 비율"] = df["직장 인구"] / df["총인구"] *100
df["주거인구 비율"] = df["주거 인구"] / df["총인구"] *100
df["유동인구 비율"]
```




    0      99.360902
    1      99.191254
    2      98.981908
    3      99.270575
    4      99.427703
             ...    
    99     99.543117
    100    98.958850
    101    98.744140
    102    99.116887
    103    99.524535
    Name: 유동인구 비율, Length: 104, dtype: float64




```python
# 구별 평균값 plot
df_per=df["유동인구 비율"].groupby(df["지역"]).mean().sort_values()
colors= ['orange' if x == "서울시 전체" else 'blue' for x in df_per.index]
df_per.plot.barh(title="구별 유동인구 비율",figsize=(12,10), color = colors)
plt.xlabel('%')
plt.xlim(98,100)
```




    (98.0, 100.0)




    
![png](/assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_86_1.png)
    



```python
# 지역별 인구별 비율
df[["지역","유동인구 비율", "직장인구 비율","주거인구 비율"]].groupby(df["지역"]).mean().plot.bar(figsize = (12,10), 
                                                                            stacked=True,
                                                                            rot=30)
plt.ylim(98,100)
```




    (98.0, 100.0)




    
![png](/assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_87_1.png)
    


## 강남, 종로, 서울전체 평균 유동인구


```python
s=df[(df["지역"] == "강남구") | (df["지역"] =="서울시 전체") | (df["지역"] == "종로구")][["분기","지역","길단위 유동인구"]]
# s.groupby(s["지역"]).plot(x="분기", y="길단위 유동인구", figsize=(12,4))
X=s["분기"].unique()
Y1=s[s["지역"]=="서울시 전체"]["길단위 유동인구"]
Y2=s[s["지역"]=="강남구"]["길단위 유동인구"]
Y3=s[s["지역"]=="종로구"]["길단위 유동인구"]

plt.figure(figsize=(14,8))
plt.plot(X, Y1, label='서울시 평균')
plt.plot(X, Y2, label='강남구')
plt.plot(X, Y3, label='종로구')
plt.legend()

plt.show()
```


    
![png](/assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_89_0.png)
    


# 조아현

# 데이터셋 출처
* [서울시_우리마을가게_상권분석서비스(신_상권_추정매출)_2021년>데이터셋>공공데이터|서울열린데이터광장](https://data.seoul.go.kr/dataList/OA-15572/S/1/datasetView.do)

* [서울시 우리마을가게 상권분석서비스(상권영역)>데이터셋>공공데이터|서울열린데이터광장](https://data.seoul.go.kr/dataList/OA-15560/S/1/datasetView.do)

* [서울시 우리마을가게 상권분석서비스(자치구별 상권변화지표)>데이터셋>공공데이터|서울열린데이터광장](https://data.seoul.go.kr/dataList/OA-15567/S/1/datasetView.do)


```python
df = pd.read_csv("data/서울시_우리마을가게_상권분석서비스(신_상권_추정매출)_2021년.csv", encoding="cp949")
df1 = pd.read_csv("data/서울시 우리마을가게 상권분석서비스(상권영역).csv", encoding="cp949", usecols=['상권_코드_명',"행정동_코드","시군구_코드",'엑스좌표_값','와이좌표_값'])
df = df.merge(df1, on="상권_코드_명", how="left")


k = pd.read_csv("data/서울시 우리마을가게 상권분석서비스(상권영역).csv", encoding="cp949", usecols=["엑스좌표_값","와이좌표_값"])
k["엑스좌표_값"] = pd.to_numeric(k["엑스좌표_값"], errors="coerce")
k["와이좌표_값"] = pd.to_numeric(k["와이좌표_값"], errors="coerce")

k = k.dropna()
k.index=range(len(k))
k.tail()

from pyproj import Proj, transform
import folium
import pyproj

def project_array(coord, p1_type, p2_type):
    """
    좌표계 변환 함수
     - coord: x, y 좌표 정보가 담긴 NumPy Array
    - p1_type: 입력 좌표계 정보 ex) epsg:5181
    - p2_type: 출력 좌표계 정보 ex) epsg:4326
    """
    p1 = pyproj.Proj(init=p1_type)
    p2 = pyproj.Proj(init=p2_type)
    fx, fy = pyproj.transform(p1, p2, coord[:, 0], coord[:, 1])
    return np.dstack([fx, fy])[0]
coord = np.array(k)
coord


p1_type = "epsg:5181"
p2_type = "epsg:4326"

# project_array() 함수 실행
result = project_array(coord, p1_type, p2_type)
result

k["위도"] = result[:,1]
k["경도"] = result[:,0]


df = df.merge(k, on="엑스좌표_값", how="left")

for col in df.columns :
    dtype_name = df[col].dtypes.name
    if dtype_name.startswith("int"):
        df[col] = pd.to_numeric(df[col], downcast = "unsigned")
    elif dtype_name.startswith("float"):
        df[col] = pd.to_numeric(df[col], downcast = "float")
    elif dtype_name == "bool":
        df[col] = df[col].astype("int8")
```

    C:\Users\gusdn\anaconda3\lib\site-packages\pyproj\crs\crs.py:130: FutureWarning:
    
    '+init=<authority>:<code>' syntax is deprecated. '<authority>:<code>' is the preferred initialization method. When making the change, be mindful of axis order changes: https://pyproj4.github.io/pyproj/stable/gotchas.html#axis-order-changes-in-proj-6
    
    C:\Users\gusdn\anaconda3\lib\site-packages\pyproj\crs\crs.py:130: FutureWarning:
    
    '+init=<authority>:<code>' syntax is deprecated. '<authority>:<code>' is the preferred initialization method. When making the change, be mindful of axis order changes: https://pyproj4.github.io/pyproj/stable/gotchas.html#axis-order-changes-in-proj-6
    
    C:\Users\gusdn\AppData\Local\Temp/ipykernel_34460/1226494671.py:27: DeprecationWarning:
    
    This function is deprecated. See: https://pyproj4.github.io/pyproj/stable/gotchas.html#upgrading-to-pyproj-2-from-pyproj-1
    



```python
df.shape
```




    (150256, 87)




```python
df2 = pd.read_csv("data/서울시 우리마을가게 상권분석서비스(자치구별 상권변화지표).csv", encoding="cp949", usecols=["시군구_코드","시군구_코드_명"])
```


```python
df2 = df2.drop_duplicates()
```


```python
df = df.merge(df2, on="시군구_코드", how="left")
```


```python
df.shape
```




    (150256, 88)




```python
df = df.rename(columns={"시군구_코드_명" : "자치구", "시군구_코드":"자치구_코드"})
```


```python
df.isnull().sum()
```




    기준_년_코드          0
    기준_분기_코드         0
    상권_구분_코드         0
    상권_구분_코드_명       0
    상권_코드            0
                  ... 
    행정동_코드        2591
    와이좌표_값_y      2591
    위도            2591
    경도            2591
    자치구           2591
    Length: 88, dtype: int64




```python
df = df.drop(columns=["엑스좌표_값","와이좌표_값_x","와이좌표_값_y"])
```


```python
df.head(3)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>기준_년_코드</th>
      <th>기준_분기_코드</th>
      <th>상권_구분_코드</th>
      <th>상권_구분_코드_명</th>
      <th>상권_코드</th>
      <th>상권_코드_명</th>
      <th>서비스_업종_코드</th>
      <th>서비스_업종_코드_명</th>
      <th>분기당_매출_금액</th>
      <th>분기당_매출_건수</th>
      <th>...</th>
      <th>연령대_30_매출_건수</th>
      <th>연령대_40_매출_건수</th>
      <th>연령대_50_매출_건수</th>
      <th>연령대_60_이상_매출_건수</th>
      <th>점포수</th>
      <th>자치구_코드</th>
      <th>행정동_코드</th>
      <th>위도</th>
      <th>경도</th>
      <th>자치구</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2021</td>
      <td>1</td>
      <td>A</td>
      <td>골목상권</td>
      <td>2110001</td>
      <td>이북5도청사</td>
      <td>CS100001</td>
      <td>한식음식점</td>
      <td>626851392.0</td>
      <td>25502</td>
      <td>...</td>
      <td>2013</td>
      <td>4344</td>
      <td>7792</td>
      <td>7568</td>
      <td>28</td>
      <td>11110.0</td>
      <td>11110560.0</td>
      <td>37.609344</td>
      <td>126.956886</td>
      <td>종로구</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2021</td>
      <td>1</td>
      <td>A</td>
      <td>골목상권</td>
      <td>2110001</td>
      <td>이북5도청사</td>
      <td>CS100008</td>
      <td>분식전문점</td>
      <td>122957136.0</td>
      <td>12039</td>
      <td>...</td>
      <td>1222</td>
      <td>2698</td>
      <td>3404</td>
      <td>2670</td>
      <td>9</td>
      <td>11110.0</td>
      <td>11110560.0</td>
      <td>37.609344</td>
      <td>126.956886</td>
      <td>종로구</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2021</td>
      <td>1</td>
      <td>A</td>
      <td>골목상권</td>
      <td>2110001</td>
      <td>이북5도청사</td>
      <td>CS100009</td>
      <td>호프-간이주점</td>
      <td>5093349.0</td>
      <td>177</td>
      <td>...</td>
      <td>9</td>
      <td>18</td>
      <td>62</td>
      <td>71</td>
      <td>3</td>
      <td>11110.0</td>
      <td>11110560.0</td>
      <td>37.609344</td>
      <td>126.956886</td>
      <td>종로구</td>
    </tr>
  </tbody>
</table>
<p>3 rows × 85 columns</p>
</div>



# 데이터 정보 확인하기

## info 보기


```python
df.info()
```

    <class 'pandas.core.frame.DataFrame'>
    Int64Index: 150256 entries, 0 to 150255
    Data columns (total 85 columns):
     #   Column           Non-Null Count   Dtype  
    ---  ------           --------------   -----  
     0   기준_년_코드          150256 non-null  uint16 
     1   기준_분기_코드         150256 non-null  uint8  
     2   상권_구분_코드         150256 non-null  object 
     3   상권_구분_코드_명       150256 non-null  object 
     4   상권_코드            150256 non-null  uint32 
     5   상권_코드_명          150256 non-null  object 
     6   서비스_업종_코드        150256 non-null  object 
     7   서비스_업종_코드_명      150256 non-null  object 
     8   분기당_매출_금액        150256 non-null  float32
     9   분기당_매출_건수        150256 non-null  uint32 
     10  주중_매출_비율         150256 non-null  uint8  
     11  주말_매출_비율         150256 non-null  uint8  
     12  월요일_매출_비율        150256 non-null  uint8  
     13  화요일_매출_비율        150256 non-null  uint8  
     14  수요일_매출_비율        150256 non-null  uint8  
     15  목요일_매출_비율        150256 non-null  uint8  
     16  금요일_매출_비율        150256 non-null  uint8  
     17  토요일_매출_비율        150256 non-null  uint8  
     18  일요일_매출_비율        150256 non-null  uint8  
     19  시간대_00~06_매출_비율  150256 non-null  uint8  
     20  시간대_06~11_매출_비율  150256 non-null  uint8  
     21  시간대_11~14_매출_비율  150256 non-null  uint8  
     22  시간대_14~17_매출_비율  150256 non-null  uint8  
     23  시간대_17~21_매출_비율  150256 non-null  uint8  
     24  시간대_21~24_매출_비율  150256 non-null  uint8  
     25  남성_매출_비율         150256 non-null  uint8  
     26  여성_매출_비율         150256 non-null  uint8  
     27  연령대_10_매출_비율     150256 non-null  uint8  
     28  연령대_20_매출_비율     150256 non-null  uint8  
     29  연령대_30_매출_비율     150256 non-null  uint8  
     30  연령대_40_매출_비율     150256 non-null  uint8  
     31  연령대_50_매출_비율     150256 non-null  uint8  
     32  연령대_60_이상_매출_비율  150256 non-null  uint8  
     33  주중_매출_금액         150256 non-null  float32
     34  주말_매출_금액         150256 non-null  float32
     35  월요일_매출_금액        150256 non-null  float32
     36  화요일_매출_금액        150256 non-null  float32
     37  수요일_매출_금액        150256 non-null  float32
     38  목요일_매출_금액        150256 non-null  float32
     39  금요일_매출_금액        150256 non-null  float32
     40  토요일_매출_금액        150256 non-null  float32
     41  일요일_매출_금액        150256 non-null  float32
     42  시간대_00~06_매출_금액  150256 non-null  uint64 
     43  시간대_06~11_매출_금액  150256 non-null  float32
     44  시간대_11~14_매출_금액  150256 non-null  float32
     45  시간대_14~17_매출_금액  150256 non-null  float32
     46  시간대_17~21_매출_금액  150256 non-null  float32
     47  시간대_21~24_매출_금액  150256 non-null  uint64 
     48  남성_매출_금액         150256 non-null  float32
     49  여성_매출_금액         150256 non-null  float32
     50  연령대_10_매출_금액     150256 non-null  uint32 
     51  연령대_20_매출_금액     150256 non-null  uint64 
     52  연령대_30_매출_금액     150256 non-null  float32
     53  연령대_40_매출_금액     150256 non-null  float32
     54  연령대_50_매출_금액     150256 non-null  float32
     55  연령대_60_이상_매출_금액  150256 non-null  float32
     56  주중_매출_건수         150256 non-null  uint32 
     57  주말_매출_건수         150256 non-null  uint32 
     58  월요일_매출_건수        150256 non-null  uint32 
     59  화요일_매출_건수        150256 non-null  uint32 
     60  수요일_매출_건수        150256 non-null  uint32 
     61  목요일_매출_건수        150256 non-null  uint32 
     62  금요일_매출_건수        150256 non-null  uint32 
     63  토요일_매출_건수        150256 non-null  uint32 
     64  일요일_매출_건수        150256 non-null  uint32 
     65  시간대_건수~06_매출_건수  150256 non-null  int64  
     66  시간대_건수~11_매출_건수  150256 non-null  uint32 
     67  시간대_건수~14_매출_건수  150256 non-null  uint32 
     68  시간대_건수~17_매출_건수  150256 non-null  int64  
     69  시간대_건수~21_매출_건수  150256 non-null  uint32 
     70  시간대_건수~24_매출_건수  150256 non-null  uint32 
     71  남성_매출_건수         150256 non-null  uint32 
     72  여성_매출_건수         150256 non-null  uint32 
     73  연령대_10_매출_건수     150256 non-null  uint32 
     74  연령대_20_매출_건수     150256 non-null  uint32 
     75  연령대_30_매출_건수     150256 non-null  uint32 
     76  연령대_40_매출_건수     150256 non-null  uint32 
     77  연령대_50_매출_건수     150256 non-null  uint32 
     78  연령대_60_이상_매출_건수  150256 non-null  uint32 
     79  점포수              150256 non-null  uint16 
     80  자치구_코드           147665 non-null  float32
     81  행정동_코드           147665 non-null  float32
     82  위도               147665 non-null  float32
     83  경도               147665 non-null  float32
     84  자치구              147665 non-null  object 
    dtypes: float32(24), int64(2), object(6), uint16(2), uint32(24), uint64(3), uint8(24)
    memory usage: 45.3+ MB


## 결측치 확인


```python
df.isnull().sum()
```




    기준_년_코드          0
    기준_분기_코드         0
    상권_구분_코드         0
    상권_구분_코드_명       0
    상권_코드            0
                  ... 
    자치구_코드        2591
    행정동_코드        2591
    위도            2591
    경도            2591
    자치구           2591
    Length: 85, dtype: int64



### 결측치 삭제


```python
df = df.dropna()
```


```python
df["서비스_업종_코드_명"].unique() #요식업, 학원, 숙박업, 부동산 등등 총 63가지 업종을 확인.
```




    array(['한식음식점', '분식전문점', '호프-간이주점', '커피-음료', '일반교습학원', '당구장', '자동차수리',
           '여관', '노래방', '편의점', '육류판매', '운동/경기용품', '제과점', '치킨전문점', '외국어학원',
           '치과의원', '골프연습장', 'PC방', '미용실', '청과상', '의약품', '화장품', '철물점', '예술학원',
           '스포츠 강습', '일반의원', '한의원', '네일숍', '세탁소', '미곡판매', '일반의류', '슈퍼마켓',
           '패스트푸드점', '자동차미용', '반찬가게', '일식음식점', '양식음식점', '컴퓨터및주변장치판매', '핸드폰',
           '가방', '문구', '화초', '서적', '중식음식점', '스포츠클럽', '피부관리실', '시계및귀금속',
           '애완동물', '인테리어', '조명용품', '신발', '전자상거래업', '가전제품수리', '안경', '섬유제품',
           '의료기기', '가전제품', '가구', '완구', '자전거 및 기타운송장비', '수산물판매', '고시원',
           '부동산중개업'], dtype=object)




```python
len(df["서비스_업종_코드"].unique())
```




    63




```python
df["상권_코드_명"].unique()
```




    array(['이북5도청사', '독립문역 1번', '세검정초등학교', ..., '잠실 관광특구', '강남 마이스 관광특구',
           '종로4가지하쇼핑센터'], dtype=object)



## 기술통계


* 분기당 최소 매출 건수가 1건인 곳이 총 12곳. (but 매출 금액이 적게는 100,000원에서 4,000,000원)
* 분기당 최대 매출 건수 = 8,757,373건으로 노량진역 수산물판매점.
* 분기당 최소 매출 금액 = 64원으로 "서비스업종"이 "스포츠강습"인 것을 확인.
* 분기당 최대 매출 금액 = 약 9760억으로 용산전자상가 "컴퓨터및주변장치판매"로 확인.
* 서비스 업종이 "스포츠강습"인 곳의 매출이 궁금해서 확인 후 매출 금액이 높은 곳이 많음.


```python
df.describe()
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>기준_년_코드</th>
      <th>기준_분기_코드</th>
      <th>상권_코드</th>
      <th>분기당_매출_금액</th>
      <th>분기당_매출_건수</th>
      <th>주중_매출_비율</th>
      <th>주말_매출_비율</th>
      <th>월요일_매출_비율</th>
      <th>화요일_매출_비율</th>
      <th>수요일_매출_비율</th>
      <th>...</th>
      <th>연령대_20_매출_건수</th>
      <th>연령대_30_매출_건수</th>
      <th>연령대_40_매출_건수</th>
      <th>연령대_50_매출_건수</th>
      <th>연령대_60_이상_매출_건수</th>
      <th>점포수</th>
      <th>자치구_코드</th>
      <th>행정동_코드</th>
      <th>위도</th>
      <th>경도</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>147665.0</td>
      <td>147665.000000</td>
      <td>1.476650e+05</td>
      <td>1.476650e+05</td>
      <td>1.476650e+05</td>
      <td>147665.000000</td>
      <td>147665.000000</td>
      <td>147665.000000</td>
      <td>147665.000000</td>
      <td>147665.000000</td>
      <td>...</td>
      <td>1.476650e+05</td>
      <td>1.476650e+05</td>
      <td>1.476650e+05</td>
      <td>1.476650e+05</td>
      <td>1.476650e+05</td>
      <td>147665.000000</td>
      <td>147665.000000</td>
      <td>1.476650e+05</td>
      <td>147665.000000</td>
      <td>147665.000000</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>2021.0</td>
      <td>2.491911</td>
      <td>2.109359e+06</td>
      <td>6.376897e+08</td>
      <td>2.445779e+04</td>
      <td>76.576426</td>
      <td>23.513162</td>
      <td>14.988325</td>
      <td>15.041357</td>
      <td>15.177639</td>
      <td>...</td>
      <td>5.389481e+03</td>
      <td>5.434813e+03</td>
      <td>4.702745e+03</td>
      <td>4.207345e+03</td>
      <td>3.316113e+03</td>
      <td>13.742546</td>
      <td>11436.145508</td>
      <td>1.143762e+07</td>
      <td>37.526482</td>
      <td>127.011330</td>
    </tr>
    <tr>
      <th>std</th>
      <td>0.0</td>
      <td>1.116533</td>
      <td>8.667791e+04</td>
      <td>6.232808e+09</td>
      <td>1.049402e+05</td>
      <td>16.208775</td>
      <td>16.221873</td>
      <td>11.962307</td>
      <td>11.834047</td>
      <td>11.503600</td>
      <td>...</td>
      <td>2.671915e+04</td>
      <td>2.618410e+04</td>
      <td>2.016669e+04</td>
      <td>1.758750e+04</td>
      <td>2.121077e+04</td>
      <td>62.986721</td>
      <td>190.235901</td>
      <td>1.902568e+05</td>
      <td>0.055798</td>
      <td>0.086877</td>
    </tr>
    <tr>
      <th>min</th>
      <td>2021.0</td>
      <td>1.000000</td>
      <td>1.001491e+06</td>
      <td>6.400000e+01</td>
      <td>1.000000e+00</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>0.000000</td>
      <td>...</td>
      <td>0.000000e+00</td>
      <td>0.000000e+00</td>
      <td>0.000000e+00</td>
      <td>0.000000e+00</td>
      <td>0.000000e+00</td>
      <td>1.000000</td>
      <td>11110.000000</td>
      <td>1.111052e+07</td>
      <td>37.436035</td>
      <td>126.802757</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>2021.0</td>
      <td>1.000000</td>
      <td>2.110452e+06</td>
      <td>2.456239e+07</td>
      <td>4.510000e+02</td>
      <td>67.000000</td>
      <td>12.000000</td>
      <td>10.000000</td>
      <td>10.000000</td>
      <td>11.000000</td>
      <td>...</td>
      <td>2.300000e+01</td>
      <td>5.500000e+01</td>
      <td>8.600000e+01</td>
      <td>8.400000e+01</td>
      <td>4.500000e+01</td>
      <td>3.000000</td>
      <td>11260.000000</td>
      <td>1.126066e+07</td>
      <td>37.505009</td>
      <td>126.918617</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>2021.0</td>
      <td>2.000000</td>
      <td>2.110899e+06</td>
      <td>9.444178e+07</td>
      <td>2.434000e+03</td>
      <td>76.000000</td>
      <td>24.000000</td>
      <td>13.000000</td>
      <td>14.000000</td>
      <td>14.000000</td>
      <td>...</td>
      <td>2.390000e+02</td>
      <td>3.870000e+02</td>
      <td>4.880000e+02</td>
      <td>5.000000e+02</td>
      <td>3.100000e+02</td>
      <td>6.000000</td>
      <td>11440.000000</td>
      <td>1.144066e+07</td>
      <td>37.545521</td>
      <td>127.006264</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>2021.0</td>
      <td>3.000000</td>
      <td>2.120165e+06</td>
      <td>3.645910e+08</td>
      <td>1.328900e+04</td>
      <td>88.000000</td>
      <td>33.000000</td>
      <td>18.000000</td>
      <td>18.000000</td>
      <td>18.000000</td>
      <td>...</td>
      <td>1.888000e+03</td>
      <td>2.384000e+03</td>
      <td>2.518000e+03</td>
      <td>2.484000e+03</td>
      <td>1.709000e+03</td>
      <td>12.000000</td>
      <td>11620.000000</td>
      <td>1.162052e+07</td>
      <td>37.583008</td>
      <td>127.056175</td>
    </tr>
    <tr>
      <th>max</th>
      <td>2021.0</td>
      <td>4.000000</td>
      <td>2.130326e+06</td>
      <td>9.766590e+11</td>
      <td>8.757373e+06</td>
      <td>100.000000</td>
      <td>100.000000</td>
      <td>100.000000</td>
      <td>100.000000</td>
      <td>100.000000</td>
      <td>...</td>
      <td>1.413897e+06</td>
      <td>1.715676e+06</td>
      <td>1.640984e+06</td>
      <td>1.778561e+06</td>
      <td>2.595689e+06</td>
      <td>10121.000000</td>
      <td>11740.000000</td>
      <td>1.174070e+07</td>
      <td>37.689976</td>
      <td>127.173813</td>
    </tr>
  </tbody>
</table>
<p>8 rows × 79 columns</p>
</div>




```python
df[df["분기당_매출_건수"] == 1.000000e+00]   #분기당 최소 매출 건수
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>기준_년_코드</th>
      <th>기준_분기_코드</th>
      <th>상권_구분_코드</th>
      <th>상권_구분_코드_명</th>
      <th>상권_코드</th>
      <th>상권_코드_명</th>
      <th>서비스_업종_코드</th>
      <th>서비스_업종_코드_명</th>
      <th>분기당_매출_금액</th>
      <th>분기당_매출_건수</th>
      <th>...</th>
      <th>연령대_30_매출_건수</th>
      <th>연령대_40_매출_건수</th>
      <th>연령대_50_매출_건수</th>
      <th>연령대_60_이상_매출_건수</th>
      <th>점포수</th>
      <th>자치구_코드</th>
      <th>행정동_코드</th>
      <th>위도</th>
      <th>경도</th>
      <th>자치구</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>7516</th>
      <td>2021</td>
      <td>1</td>
      <td>A</td>
      <td>골목상권</td>
      <td>2110395</td>
      <td>신한은행 방학동지점</td>
      <td>CS300011</td>
      <td>일반의류</td>
      <td>2000000.0</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>11320.0</td>
      <td>11320690.0</td>
      <td>37.664009</td>
      <td>127.036385</td>
      <td>도봉구</td>
    </tr>
    <tr>
      <th>7517</th>
      <td>2021</td>
      <td>1</td>
      <td>A</td>
      <td>골목상권</td>
      <td>2110395</td>
      <td>신한은행 방학동지점</td>
      <td>CS300011</td>
      <td>일반의류</td>
      <td>2000000.0</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>1</td>
      <td>11320.0</td>
      <td>11320690.0</td>
      <td>37.475151</td>
      <td>127.036293</td>
      <td>도봉구</td>
    </tr>
    <tr>
      <th>11403</th>
      <td>2021</td>
      <td>1</td>
      <td>A</td>
      <td>골목상권</td>
      <td>2110558</td>
      <td>경성고등학교</td>
      <td>CS200026</td>
      <td>자동차미용</td>
      <td>1000000.0</td>
      <td>1</td>
      <td>...</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>11440.0</td>
      <td>11440720.0</td>
      <td>37.564209</td>
      <td>126.915359</td>
      <td>마포구</td>
    </tr>
    <tr>
      <th>11584</th>
      <td>2021</td>
      <td>1</td>
      <td>A</td>
      <td>골목상권</td>
      <td>2110568</td>
      <td>광흥창역 1번</td>
      <td>CS200024</td>
      <td>스포츠클럽</td>
      <td>1000000.0</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>11440.0</td>
      <td>11440655.0</td>
      <td>37.549110</td>
      <td>126.931129</td>
      <td>마포구</td>
    </tr>
    <tr>
      <th>11662</th>
      <td>2021</td>
      <td>1</td>
      <td>A</td>
      <td>골목상권</td>
      <td>2110572</td>
      <td>서강대역 1번</td>
      <td>CS200005</td>
      <td>스포츠 강습</td>
      <td>1000000.0</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>11440.0</td>
      <td>11440630.0</td>
      <td>37.550377</td>
      <td>126.936714</td>
      <td>마포구</td>
    </tr>
    <tr>
      <th>19255</th>
      <td>2021</td>
      <td>1</td>
      <td>A</td>
      <td>골목상권</td>
      <td>2110963</td>
      <td>역삼월드메르디앙아파트</td>
      <td>CS100009</td>
      <td>호프-간이주점</td>
      <td>3000000.0</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>11680.0</td>
      <td>11680640.0</td>
      <td>37.492378</td>
      <td>127.036865</td>
      <td>강남구</td>
    </tr>
    <tr>
      <th>38035</th>
      <td>2021</td>
      <td>2</td>
      <td>A</td>
      <td>골목상권</td>
      <td>2110020</td>
      <td>서울국제고등학교</td>
      <td>CS300003</td>
      <td>컴퓨터및주변장치판매</td>
      <td>3000000.0</td>
      <td>1</td>
      <td>...</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>11110.0</td>
      <td>11110650.0</td>
      <td>37.589108</td>
      <td>126.995369</td>
      <td>종로구</td>
    </tr>
    <tr>
      <th>76352</th>
      <td>2021</td>
      <td>3</td>
      <td>A</td>
      <td>골목상권</td>
      <td>2110058</td>
      <td>성심여자고등학교</td>
      <td>CS300022</td>
      <td>화장품</td>
      <td>8000000.0</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>11170.0</td>
      <td>11170570.0</td>
      <td>37.534191</td>
      <td>126.954643</td>
      <td>용산구</td>
    </tr>
    <tr>
      <th>76947</th>
      <td>2021</td>
      <td>3</td>
      <td>A</td>
      <td>골목상권</td>
      <td>2110087</td>
      <td>이태원엔틱가구거리</td>
      <td>CS200002</td>
      <td>외국어학원</td>
      <td>4000000.0</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>11170.0</td>
      <td>11170650.0</td>
      <td>37.531155</td>
      <td>126.993889</td>
      <td>용산구</td>
    </tr>
    <tr>
      <th>95669</th>
      <td>2021</td>
      <td>3</td>
      <td>A</td>
      <td>골목상권</td>
      <td>2111019</td>
      <td>한성백제역 3번</td>
      <td>CS200016</td>
      <td>당구장</td>
      <td>1000000.0</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>11710.0</td>
      <td>11710562.0</td>
      <td>37.513634</td>
      <td>127.117783</td>
      <td>송파구</td>
    </tr>
    <tr>
      <th>103565</th>
      <td>2021</td>
      <td>3</td>
      <td>D</td>
      <td>발달상권</td>
      <td>2120172</td>
      <td>교대입구교차로</td>
      <td>CS200033</td>
      <td>부동산중개업</td>
      <td>20000000.0</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>11650.0</td>
      <td>11650530.0</td>
      <td>37.487808</td>
      <td>127.012665</td>
      <td>서초구</td>
    </tr>
    <tr>
      <th>103671</th>
      <td>2021</td>
      <td>3</td>
      <td>D</td>
      <td>발달상권</td>
      <td>2120175</td>
      <td>남부터미널역</td>
      <td>CS300014</td>
      <td>신발</td>
      <td>1000000.0</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>11650.0</td>
      <td>11650510.0</td>
      <td>37.485031</td>
      <td>127.018105</td>
      <td>서초구</td>
    </tr>
    <tr>
      <th>114478</th>
      <td>2021</td>
      <td>4</td>
      <td>A</td>
      <td>골목상권</td>
      <td>2110087</td>
      <td>이태원엔틱가구거리</td>
      <td>CS200002</td>
      <td>외국어학원</td>
      <td>4000000.0</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>11170.0</td>
      <td>11170650.0</td>
      <td>37.531155</td>
      <td>126.993889</td>
      <td>용산구</td>
    </tr>
  </tbody>
</table>
<p>13 rows × 85 columns</p>
</div>




```python
df[df["분기당_매출_건수"] == 8.757373e+06]  #분기당 최대 매출 건수 = 8,757,373건
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>기준_년_코드</th>
      <th>기준_분기_코드</th>
      <th>상권_구분_코드</th>
      <th>상권_구분_코드_명</th>
      <th>상권_코드</th>
      <th>상권_코드_명</th>
      <th>서비스_업종_코드</th>
      <th>서비스_업종_코드_명</th>
      <th>분기당_매출_금액</th>
      <th>분기당_매출_건수</th>
      <th>...</th>
      <th>연령대_30_매출_건수</th>
      <th>연령대_40_매출_건수</th>
      <th>연령대_50_매출_건수</th>
      <th>연령대_60_이상_매출_건수</th>
      <th>점포수</th>
      <th>자치구_코드</th>
      <th>행정동_코드</th>
      <th>위도</th>
      <th>경도</th>
      <th>자치구</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>140021</th>
      <td>2021</td>
      <td>4</td>
      <td>D</td>
      <td>발달상권</td>
      <td>2120153</td>
      <td>노량진역(노량진)</td>
      <td>CS300008</td>
      <td>수산물판매</td>
      <td>6.347860e+11</td>
      <td>8757373</td>
      <td>...</td>
      <td>1715676</td>
      <td>1547874</td>
      <td>1778561</td>
      <td>2126918</td>
      <td>846</td>
      <td>11590.0</td>
      <td>11590510.0</td>
      <td>37.513931</td>
      <td>126.941193</td>
      <td>동작구</td>
    </tr>
  </tbody>
</table>
<p>1 rows × 85 columns</p>
</div>




```python
# 분기당 최대 매출 건수가 가장 높은 곳을 분기별로 비교해 보았디.
df.loc[(df["상권_코드_명"] == "노량진역(노량진)") & (df["서비스_업종_코드_명"] == "수산물판매")]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>기준_년_코드</th>
      <th>기준_분기_코드</th>
      <th>상권_구분_코드</th>
      <th>상권_구분_코드_명</th>
      <th>상권_코드</th>
      <th>상권_코드_명</th>
      <th>서비스_업종_코드</th>
      <th>서비스_업종_코드_명</th>
      <th>분기당_매출_금액</th>
      <th>분기당_매출_건수</th>
      <th>...</th>
      <th>연령대_30_매출_건수</th>
      <th>연령대_40_매출_건수</th>
      <th>연령대_50_매출_건수</th>
      <th>연령대_60_이상_매출_건수</th>
      <th>점포수</th>
      <th>자치구_코드</th>
      <th>행정동_코드</th>
      <th>위도</th>
      <th>경도</th>
      <th>자치구</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>27427</th>
      <td>2021</td>
      <td>1</td>
      <td>D</td>
      <td>발달상권</td>
      <td>2120153</td>
      <td>노량진역(노량진)</td>
      <td>CS300008</td>
      <td>수산물판매</td>
      <td>5.712170e+11</td>
      <td>8190112</td>
      <td>...</td>
      <td>1563710</td>
      <td>1640984</td>
      <td>1704165</td>
      <td>2157370</td>
      <td>808</td>
      <td>11590.0</td>
      <td>11590510.0</td>
      <td>37.513931</td>
      <td>126.941193</td>
      <td>동작구</td>
    </tr>
    <tr>
      <th>65256</th>
      <td>2021</td>
      <td>2</td>
      <td>D</td>
      <td>발달상권</td>
      <td>2120153</td>
      <td>노량진역(노량진)</td>
      <td>CS300008</td>
      <td>수산물판매</td>
      <td>4.377120e+11</td>
      <td>6090526</td>
      <td>...</td>
      <td>1246679</td>
      <td>1198820</td>
      <td>1206671</td>
      <td>1469307</td>
      <td>792</td>
      <td>11590.0</td>
      <td>11590510.0</td>
      <td>37.513931</td>
      <td>126.941193</td>
      <td>동작구</td>
    </tr>
    <tr>
      <th>102837</th>
      <td>2021</td>
      <td>3</td>
      <td>D</td>
      <td>발달상권</td>
      <td>2120153</td>
      <td>노량진역(노량진)</td>
      <td>CS300008</td>
      <td>수산물판매</td>
      <td>3.849820e+11</td>
      <td>5457609</td>
      <td>...</td>
      <td>1020965</td>
      <td>1031254</td>
      <td>1089478</td>
      <td>1499119</td>
      <td>774</td>
      <td>11590.0</td>
      <td>11590510.0</td>
      <td>37.513931</td>
      <td>126.941193</td>
      <td>동작구</td>
    </tr>
    <tr>
      <th>140021</th>
      <td>2021</td>
      <td>4</td>
      <td>D</td>
      <td>발달상권</td>
      <td>2120153</td>
      <td>노량진역(노량진)</td>
      <td>CS300008</td>
      <td>수산물판매</td>
      <td>6.347860e+11</td>
      <td>8757373</td>
      <td>...</td>
      <td>1715676</td>
      <td>1547874</td>
      <td>1778561</td>
      <td>2126918</td>
      <td>846</td>
      <td>11590.0</td>
      <td>11590510.0</td>
      <td>37.513931</td>
      <td>126.941193</td>
      <td>동작구</td>
    </tr>
  </tbody>
</table>
<p>4 rows × 85 columns</p>
</div>




```python
df[df["분기당_매출_금액"] == 6.400000e+01]  # 64원?    분기당 평균 매출 금액 = 약 6억6천만원
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>기준_년_코드</th>
      <th>기준_분기_코드</th>
      <th>상권_구분_코드</th>
      <th>상권_구분_코드_명</th>
      <th>상권_코드</th>
      <th>상권_코드_명</th>
      <th>서비스_업종_코드</th>
      <th>서비스_업종_코드_명</th>
      <th>분기당_매출_금액</th>
      <th>분기당_매출_건수</th>
      <th>...</th>
      <th>연령대_30_매출_건수</th>
      <th>연령대_40_매출_건수</th>
      <th>연령대_50_매출_건수</th>
      <th>연령대_60_이상_매출_건수</th>
      <th>점포수</th>
      <th>자치구_코드</th>
      <th>행정동_코드</th>
      <th>위도</th>
      <th>경도</th>
      <th>자치구</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>115115</th>
      <td>2021</td>
      <td>4</td>
      <td>A</td>
      <td>골목상권</td>
      <td>2110131</td>
      <td>성수동카페거리</td>
      <td>CS200005</td>
      <td>스포츠 강습</td>
      <td>64.0</td>
      <td>6</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>6</td>
      <td>0</td>
      <td>1</td>
      <td>11200.0</td>
      <td>11200670.0</td>
      <td>37.54221</td>
      <td>127.053001</td>
      <td>성동구</td>
    </tr>
  </tbody>
</table>
<p>1 rows × 85 columns</p>
</div>




```python
#  분기당 매출 금액에서 최소 금액에 해당하는 서비스 업종이 "스포츠강습"이어서 스포츠강습의 분기당
# 매출 금액을 비교해 보았다.
df[df["서비스_업종_코드_명"] == "스포츠 강습"].sort_values(by = "분기당_매출_금액", ascending=False)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>기준_년_코드</th>
      <th>기준_분기_코드</th>
      <th>상권_구분_코드</th>
      <th>상권_구분_코드_명</th>
      <th>상권_코드</th>
      <th>상권_코드_명</th>
      <th>서비스_업종_코드</th>
      <th>서비스_업종_코드_명</th>
      <th>분기당_매출_금액</th>
      <th>분기당_매출_건수</th>
      <th>...</th>
      <th>연령대_30_매출_건수</th>
      <th>연령대_40_매출_건수</th>
      <th>연령대_50_매출_건수</th>
      <th>연령대_60_이상_매출_건수</th>
      <th>점포수</th>
      <th>자치구_코드</th>
      <th>행정동_코드</th>
      <th>위도</th>
      <th>경도</th>
      <th>자치구</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>65061</th>
      <td>2021</td>
      <td>2</td>
      <td>D</td>
      <td>발달상권</td>
      <td>2120149</td>
      <td>여의도역(여의도)</td>
      <td>CS200005</td>
      <td>스포츠 강습</td>
      <td>4.246077e+09</td>
      <td>6295</td>
      <td>...</td>
      <td>2548</td>
      <td>1210</td>
      <td>429</td>
      <td>51</td>
      <td>61</td>
      <td>11560.0</td>
      <td>11560540.0</td>
      <td>37.523106</td>
      <td>126.925102</td>
      <td>영등포구</td>
    </tr>
    <tr>
      <th>142150</th>
      <td>2021</td>
      <td>4</td>
      <td>D</td>
      <td>발달상권</td>
      <td>2120207</td>
      <td>선정릉역</td>
      <td>CS200005</td>
      <td>스포츠 강습</td>
      <td>3.870122e+09</td>
      <td>10228</td>
      <td>...</td>
      <td>1252</td>
      <td>2163</td>
      <td>3859</td>
      <td>2605</td>
      <td>23</td>
      <td>11680.0</td>
      <td>11680590.0</td>
      <td>37.511406</td>
      <td>127.045410</td>
      <td>강남구</td>
    </tr>
    <tr>
      <th>104988</th>
      <td>2021</td>
      <td>3</td>
      <td>D</td>
      <td>발달상권</td>
      <td>2120207</td>
      <td>선정릉역</td>
      <td>CS200005</td>
      <td>스포츠 강습</td>
      <td>3.552829e+09</td>
      <td>10088</td>
      <td>...</td>
      <td>1093</td>
      <td>2278</td>
      <td>3556</td>
      <td>2707</td>
      <td>18</td>
      <td>11680.0</td>
      <td>11680590.0</td>
      <td>37.511406</td>
      <td>127.045410</td>
      <td>강남구</td>
    </tr>
    <tr>
      <th>67408</th>
      <td>2021</td>
      <td>2</td>
      <td>D</td>
      <td>발달상권</td>
      <td>2120207</td>
      <td>선정릉역</td>
      <td>CS200005</td>
      <td>스포츠 강습</td>
      <td>3.262348e+09</td>
      <td>11612</td>
      <td>...</td>
      <td>1262</td>
      <td>2624</td>
      <td>3792</td>
      <td>3489</td>
      <td>19</td>
      <td>11680.0</td>
      <td>11680590.0</td>
      <td>37.511406</td>
      <td>127.045410</td>
      <td>강남구</td>
    </tr>
    <tr>
      <th>67116</th>
      <td>2021</td>
      <td>2</td>
      <td>D</td>
      <td>발달상권</td>
      <td>2120200</td>
      <td>학동사거리</td>
      <td>CS200005</td>
      <td>스포츠 강습</td>
      <td>3.216324e+09</td>
      <td>26729</td>
      <td>...</td>
      <td>9426</td>
      <td>2813</td>
      <td>2222</td>
      <td>608</td>
      <td>40</td>
      <td>11680.0</td>
      <td>11680545.0</td>
      <td>37.522896</td>
      <td>127.039413</td>
      <td>강남구</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>90555</th>
      <td>2021</td>
      <td>3</td>
      <td>A</td>
      <td>골목상권</td>
      <td>2110736</td>
      <td>독산119안전센터</td>
      <td>CS200005</td>
      <td>스포츠 강습</td>
      <td>5.484460e+05</td>
      <td>4</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>11545.0</td>
      <td>11545640.0</td>
      <td>37.468872</td>
      <td>126.900780</td>
      <td>금천구</td>
    </tr>
    <tr>
      <th>8149</th>
      <td>2021</td>
      <td>1</td>
      <td>A</td>
      <td>골목상권</td>
      <td>2110418</td>
      <td>광운대학교 남단</td>
      <td>CS200005</td>
      <td>스포츠 강습</td>
      <td>4.434910e+05</td>
      <td>9</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>9</td>
      <td>0</td>
      <td>1</td>
      <td>11350.0</td>
      <td>11350560.0</td>
      <td>37.617718</td>
      <td>127.057899</td>
      <td>노원구</td>
    </tr>
    <tr>
      <th>71923</th>
      <td>2021</td>
      <td>2</td>
      <td>R</td>
      <td>전통시장</td>
      <td>2130163</td>
      <td>응암오거리상점가</td>
      <td>CS200005</td>
      <td>스포츠 강습</td>
      <td>3.984670e+05</td>
      <td>3</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>3</td>
      <td>0</td>
      <td>1</td>
      <td>11380.0</td>
      <td>11380600.0</td>
      <td>37.588905</td>
      <td>126.915367</td>
      <td>은평구</td>
    </tr>
    <tr>
      <th>98751</th>
      <td>2021</td>
      <td>3</td>
      <td>D</td>
      <td>발달상권</td>
      <td>2120045</td>
      <td>남영동 먹자골목</td>
      <td>CS200005</td>
      <td>스포츠 강습</td>
      <td>2.197000e+03</td>
      <td>22</td>
      <td>...</td>
      <td>0</td>
      <td>22</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>11170.0</td>
      <td>11170530.0</td>
      <td>37.542831</td>
      <td>126.973297</td>
      <td>용산구</td>
    </tr>
    <tr>
      <th>115115</th>
      <td>2021</td>
      <td>4</td>
      <td>A</td>
      <td>골목상권</td>
      <td>2110131</td>
      <td>성수동카페거리</td>
      <td>CS200005</td>
      <td>스포츠 강습</td>
      <td>6.400000e+01</td>
      <td>6</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>6</td>
      <td>0</td>
      <td>1</td>
      <td>11200.0</td>
      <td>11200670.0</td>
      <td>37.542210</td>
      <td>127.053001</td>
      <td>성동구</td>
    </tr>
  </tbody>
</table>
<p>3017 rows × 85 columns</p>
</div>




```python
# 분기당 매출 금액이 제일 적은 곳을 분기별로 비교해보니 1분기때는 금액이 높았으나 점점 줄어듬
# 아무래도 코로나19로 인해 사회적거리두기로 인해 등록률이 낮았을 수도, 아니면 연간회원권으로 등록해서
# 그런건지는 모르겠다.
df[(df["서비스_업종_코드_명"] == "스포츠 강습") & (df["상권_코드_명"] == "성수동카페거리")]
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>기준_년_코드</th>
      <th>기준_분기_코드</th>
      <th>상권_구분_코드</th>
      <th>상권_구분_코드_명</th>
      <th>상권_코드</th>
      <th>상권_코드_명</th>
      <th>서비스_업종_코드</th>
      <th>서비스_업종_코드_명</th>
      <th>분기당_매출_금액</th>
      <th>분기당_매출_건수</th>
      <th>...</th>
      <th>연령대_30_매출_건수</th>
      <th>연령대_40_매출_건수</th>
      <th>연령대_50_매출_건수</th>
      <th>연령대_60_이상_매출_건수</th>
      <th>점포수</th>
      <th>자치구_코드</th>
      <th>행정동_코드</th>
      <th>위도</th>
      <th>경도</th>
      <th>자치구</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1970</th>
      <td>2021</td>
      <td>1</td>
      <td>A</td>
      <td>골목상권</td>
      <td>2110131</td>
      <td>성수동카페거리</td>
      <td>CS200005</td>
      <td>스포츠 강습</td>
      <td>3220422.0</td>
      <td>12</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>2</td>
      <td>11200.0</td>
      <td>11200670.0</td>
      <td>37.54221</td>
      <td>127.053001</td>
      <td>성동구</td>
    </tr>
    <tr>
      <th>39770</th>
      <td>2021</td>
      <td>2</td>
      <td>A</td>
      <td>골목상권</td>
      <td>2110131</td>
      <td>성수동카페거리</td>
      <td>CS200005</td>
      <td>스포츠 강습</td>
      <td>1610211.0</td>
      <td>6</td>
      <td>...</td>
      <td>6</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>11200.0</td>
      <td>11200670.0</td>
      <td>37.54221</td>
      <td>127.053001</td>
      <td>성동구</td>
    </tr>
    <tr>
      <th>77584</th>
      <td>2021</td>
      <td>3</td>
      <td>A</td>
      <td>골목상권</td>
      <td>2110131</td>
      <td>성수동카페거리</td>
      <td>CS200005</td>
      <td>스포츠 강습</td>
      <td>1610211.0</td>
      <td>6</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>6</td>
      <td>0</td>
      <td>1</td>
      <td>11200.0</td>
      <td>11200670.0</td>
      <td>37.54221</td>
      <td>127.053001</td>
      <td>성동구</td>
    </tr>
    <tr>
      <th>115115</th>
      <td>2021</td>
      <td>4</td>
      <td>A</td>
      <td>골목상권</td>
      <td>2110131</td>
      <td>성수동카페거리</td>
      <td>CS200005</td>
      <td>스포츠 강습</td>
      <td>64.0</td>
      <td>6</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>6</td>
      <td>0</td>
      <td>1</td>
      <td>11200.0</td>
      <td>11200670.0</td>
      <td>37.54221</td>
      <td>127.053001</td>
      <td>성동구</td>
    </tr>
  </tbody>
</table>
<p>4 rows × 85 columns</p>
</div>




```python
df[df["분기당_매출_금액"] == 976659285789] #9760억
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>기준_년_코드</th>
      <th>기준_분기_코드</th>
      <th>상권_구분_코드</th>
      <th>상권_구분_코드_명</th>
      <th>상권_코드</th>
      <th>상권_코드_명</th>
      <th>서비스_업종_코드</th>
      <th>서비스_업종_코드_명</th>
      <th>분기당_매출_금액</th>
      <th>분기당_매출_건수</th>
      <th>...</th>
      <th>연령대_30_매출_건수</th>
      <th>연령대_40_매출_건수</th>
      <th>연령대_50_매출_건수</th>
      <th>연령대_60_이상_매출_건수</th>
      <th>점포수</th>
      <th>자치구_코드</th>
      <th>행정동_코드</th>
      <th>위도</th>
      <th>경도</th>
      <th>자치구</th>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table>
<p>0 rows × 85 columns</p>
</div>




```python
# #  분기당 매출 금액에서 최대 금액에 해당하는 서비스 업종이 "컴퓨터및주변장치판매"이어서 스포츠강습의 분기당
# 매출 금액을 비교해 보았다.
df[df["서비스_업종_코드_명"] == "컴퓨터및주변장치판매"].sort_values(by = "분기당_매출_금액", ascending=False)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>기준_년_코드</th>
      <th>기준_분기_코드</th>
      <th>상권_구분_코드</th>
      <th>상권_구분_코드_명</th>
      <th>상권_코드</th>
      <th>상권_코드_명</th>
      <th>서비스_업종_코드</th>
      <th>서비스_업종_코드_명</th>
      <th>분기당_매출_금액</th>
      <th>분기당_매출_건수</th>
      <th>...</th>
      <th>연령대_30_매출_건수</th>
      <th>연령대_40_매출_건수</th>
      <th>연령대_50_매출_건수</th>
      <th>연령대_60_이상_매출_건수</th>
      <th>점포수</th>
      <th>자치구_코드</th>
      <th>행정동_코드</th>
      <th>위도</th>
      <th>경도</th>
      <th>자치구</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>135783</th>
      <td>2021</td>
      <td>4</td>
      <td>D</td>
      <td>발달상권</td>
      <td>2120040</td>
      <td>용산전자상가(용산역)</td>
      <td>CS300003</td>
      <td>컴퓨터및주변장치판매</td>
      <td>9.766590e+11</td>
      <td>2137514</td>
      <td>...</td>
      <td>332194</td>
      <td>396315</td>
      <td>334462</td>
      <td>211601</td>
      <td>1051</td>
      <td>11170.0</td>
      <td>11170570.0</td>
      <td>37.533295</td>
      <td>126.961151</td>
      <td>용산구</td>
    </tr>
    <tr>
      <th>98583</th>
      <td>2021</td>
      <td>3</td>
      <td>D</td>
      <td>발달상권</td>
      <td>2120040</td>
      <td>용산전자상가(용산역)</td>
      <td>CS300003</td>
      <td>컴퓨터및주변장치판매</td>
      <td>8.753490e+11</td>
      <td>2879850</td>
      <td>...</td>
      <td>507466</td>
      <td>532652</td>
      <td>527471</td>
      <td>260688</td>
      <td>1073</td>
      <td>11170.0</td>
      <td>11170570.0</td>
      <td>37.533295</td>
      <td>126.961151</td>
      <td>용산구</td>
    </tr>
    <tr>
      <th>23144</th>
      <td>2021</td>
      <td>1</td>
      <td>D</td>
      <td>발달상권</td>
      <td>2120040</td>
      <td>용산전자상가(용산역)</td>
      <td>CS300003</td>
      <td>컴퓨터및주변장치판매</td>
      <td>8.330010e+11</td>
      <td>2836234</td>
      <td>...</td>
      <td>451152</td>
      <td>583233</td>
      <td>503364</td>
      <td>407158</td>
      <td>1118</td>
      <td>11170.0</td>
      <td>11170570.0</td>
      <td>37.533295</td>
      <td>126.961151</td>
      <td>용산구</td>
    </tr>
    <tr>
      <th>60963</th>
      <td>2021</td>
      <td>2</td>
      <td>D</td>
      <td>발달상권</td>
      <td>2120040</td>
      <td>용산전자상가(용산역)</td>
      <td>CS300003</td>
      <td>컴퓨터및주변장치판매</td>
      <td>7.662170e+11</td>
      <td>2453504</td>
      <td>...</td>
      <td>406618</td>
      <td>472244</td>
      <td>430064</td>
      <td>271833</td>
      <td>1072</td>
      <td>11170.0</td>
      <td>11170570.0</td>
      <td>37.533295</td>
      <td>126.961151</td>
      <td>용산구</td>
    </tr>
    <tr>
      <th>23910</th>
      <td>2021</td>
      <td>1</td>
      <td>D</td>
      <td>발달상권</td>
      <td>2120060</td>
      <td>강변역(테크노마트)</td>
      <td>CS300003</td>
      <td>컴퓨터및주변장치판매</td>
      <td>5.235578e+10</td>
      <td>167880</td>
      <td>...</td>
      <td>26389</td>
      <td>38793</td>
      <td>28336</td>
      <td>14654</td>
      <td>355</td>
      <td>11215.0</td>
      <td>11215870.0</td>
      <td>37.534729</td>
      <td>127.094872</td>
      <td>광진구</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>90564</th>
      <td>2021</td>
      <td>3</td>
      <td>A</td>
      <td>골목상권</td>
      <td>2110736</td>
      <td>독산119안전센터</td>
      <td>CS300003</td>
      <td>컴퓨터및주변장치판매</td>
      <td>9.296800e+04</td>
      <td>6</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>6</td>
      <td>0</td>
      <td>1</td>
      <td>11545.0</td>
      <td>11545640.0</td>
      <td>37.468872</td>
      <td>126.900780</td>
      <td>금천구</td>
    </tr>
    <tr>
      <th>18237</th>
      <td>2021</td>
      <td>1</td>
      <td>A</td>
      <td>골목상권</td>
      <td>2110891</td>
      <td>구암초등학교</td>
      <td>CS300003</td>
      <td>컴퓨터및주변장치판매</td>
      <td>8.574700e+04</td>
      <td>1715</td>
      <td>...</td>
      <td>1715</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>11620.0</td>
      <td>11620565.0</td>
      <td>37.488544</td>
      <td>126.948074</td>
      <td>관악구</td>
    </tr>
    <tr>
      <th>26248</th>
      <td>2021</td>
      <td>1</td>
      <td>D</td>
      <td>발달상권</td>
      <td>2120121</td>
      <td>까치산역</td>
      <td>CS300003</td>
      <td>컴퓨터및주변장치판매</td>
      <td>8.247200e+04</td>
      <td>82</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>41</td>
      <td>0</td>
      <td>2</td>
      <td>11500.0</td>
      <td>11500540.0</td>
      <td>37.530121</td>
      <td>126.847664</td>
      <td>강서구</td>
    </tr>
    <tr>
      <th>51170</th>
      <td>2021</td>
      <td>2</td>
      <td>A</td>
      <td>골목상권</td>
      <td>2110654</td>
      <td>까치산역 4번</td>
      <td>CS300003</td>
      <td>컴퓨터및주변장치판매</td>
      <td>5.263200e+04</td>
      <td>11</td>
      <td>...</td>
      <td>0</td>
      <td>11</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
      <td>11500.0</td>
      <td>11500540.0</td>
      <td>37.533024</td>
      <td>126.841255</td>
      <td>강서구</td>
    </tr>
    <tr>
      <th>54018</th>
      <td>2021</td>
      <td>2</td>
      <td>A</td>
      <td>골목상권</td>
      <td>2110789</td>
      <td>대림성모병원</td>
      <td>CS300003</td>
      <td>컴퓨터및주변장치판매</td>
      <td>3.675000e+03</td>
      <td>37</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>37</td>
      <td>0</td>
      <td>1</td>
      <td>11560.0</td>
      <td>11560700.0</td>
      <td>37.490746</td>
      <td>126.906319</td>
      <td>영등포구</td>
    </tr>
  </tbody>
</table>
<p>851 rows × 85 columns</p>
</div>



### 범주형 데이터 기술통계
* {"A" : "골목상권", "D" : "발달상권" , "R" : "전통시장", "U" : "관광특구"}인것을 확인.

* "상권_코드_명"은 총 1651가지로 나뉘어져 있고, ["종로·청계 관광특구"]에 제일 많은 것을 확인.

* "서비스_업종_코드" 와	"서비스_업종_코드_명"은 총 63개의 업종으로 나뉘고 ["한식음식점"]이 제일 많은 것을 확인.
* "상권_구분_코드" == "상권_구분_코드_명" | "서비스_업종_코드" == "서비스_업종_코드_명"


```python
df.describe(include="object")
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>상권_구분_코드</th>
      <th>상권_구분_코드_명</th>
      <th>상권_코드_명</th>
      <th>서비스_업종_코드</th>
      <th>서비스_업종_코드_명</th>
      <th>자치구</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>147665</td>
      <td>147665</td>
      <td>147665</td>
      <td>147665</td>
      <td>147665</td>
      <td>147665</td>
    </tr>
    <tr>
      <th>unique</th>
      <td>4</td>
      <td>4</td>
      <td>1630</td>
      <td>63</td>
      <td>63</td>
      <td>25</td>
    </tr>
    <tr>
      <th>top</th>
      <td>A</td>
      <td>골목상권</td>
      <td>잠실새내역(신천)</td>
      <td>CS100001</td>
      <td>한식음식점</td>
      <td>강남구</td>
    </tr>
    <tr>
      <th>freq</th>
      <td>86565</td>
      <td>86565</td>
      <td>400</td>
      <td>6426</td>
      <td>6426</td>
      <td>9822</td>
    </tr>
  </tbody>
</table>
</div>




```python
df.head(2)
```




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>기준_년_코드</th>
      <th>기준_분기_코드</th>
      <th>상권_구분_코드</th>
      <th>상권_구분_코드_명</th>
      <th>상권_코드</th>
      <th>상권_코드_명</th>
      <th>서비스_업종_코드</th>
      <th>서비스_업종_코드_명</th>
      <th>분기당_매출_금액</th>
      <th>분기당_매출_건수</th>
      <th>...</th>
      <th>연령대_30_매출_건수</th>
      <th>연령대_40_매출_건수</th>
      <th>연령대_50_매출_건수</th>
      <th>연령대_60_이상_매출_건수</th>
      <th>점포수</th>
      <th>자치구_코드</th>
      <th>행정동_코드</th>
      <th>위도</th>
      <th>경도</th>
      <th>자치구</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>2021</td>
      <td>1</td>
      <td>A</td>
      <td>골목상권</td>
      <td>2110001</td>
      <td>이북5도청사</td>
      <td>CS100001</td>
      <td>한식음식점</td>
      <td>626851392.0</td>
      <td>25502</td>
      <td>...</td>
      <td>2013</td>
      <td>4344</td>
      <td>7792</td>
      <td>7568</td>
      <td>28</td>
      <td>11110.0</td>
      <td>11110560.0</td>
      <td>37.609344</td>
      <td>126.956886</td>
      <td>종로구</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2021</td>
      <td>1</td>
      <td>A</td>
      <td>골목상권</td>
      <td>2110001</td>
      <td>이북5도청사</td>
      <td>CS100008</td>
      <td>분식전문점</td>
      <td>122957136.0</td>
      <td>12039</td>
      <td>...</td>
      <td>1222</td>
      <td>2698</td>
      <td>3404</td>
      <td>2670</td>
      <td>9</td>
      <td>11110.0</td>
      <td>11110560.0</td>
      <td>37.609344</td>
      <td>126.956886</td>
      <td>종로구</td>
    </tr>
  </tbody>
</table>
<p>2 rows × 85 columns</p>
</div>




```python
pd.options.display.max_columns = None
```


```python
# 분기마다 수가 다른 것은 개업, 폐업을 했다고 봐도 될까?
df["기준_분기_코드"].value_counts().sort_index()
```




    1    37148
    2    37172
    3    36904
    4    36441
    Name: 기준_분기_코드, dtype: int64




```python
df["상권_구분_코드"].value_counts() #{"A" : "골목상권", "D" : "발달상권" , "R" : "전통시장", "U" : "관광특구"}인것을 확인.
```




    A    86565
    D    36635
    R    23573
    U      892
    Name: 상권_구분_코드, dtype: int64




```python
# 골목상권에 업종들이 많이 있는 것을 확인.
df["상권_구분_코드_명"].value_counts().plot(kind="bar", rot=0)
```




    <AxesSubplot:>




    
![png](/assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_128_1.png)
    


# 데이터 시각화


## "기준_분기_코드"를 기준으로 비율, 건수, 금액 별로 비교하기

* 분기별로 항상 일요일 매출 비율이 가장 적고, 대부분 금요일 매출 비율이 높은것을 확인할 수 있다


```python
df.groupby("기준_분기_코드")[["월요일_매출_금액","화요일_매출_금액","수요일_매출_금액","목요일_매출_금액","금요일_매출_금액","토요일_매출_금액","일요일_매출_금액"]].mean().plot(kind="bar", rot=0)
```




    <AxesSubplot:xlabel='기준_분기_코드'>




    
![png](/assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_131_1.png)
    


* 분기별로 매출 시간대를 비교했을 때 유동인구가 적은 시간인 오전에는 매출이 적고, 유동인구가 많은 시간에는 매출이 높다.


```python
df.groupby("기준_분기_코드")[['시간대_00~06_매출_금액','시간대_06~11_매출_금액','시간대_11~14_매출_금액','시간대_14~17_매출_금액','시간대_17~21_매출_금액','시간대_21~24_매출_금액']].mean().plot(kind="bar", rot=0)
```




    <AxesSubplot:xlabel='기준_분기_코드'>




    
![png](/assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_133_1.png)
    


* 분기별로 항상 남성 매출 비율이 높다.


```python
df.groupby("기준_분기_코드")[['남성_매출_금액','여성_매출_금액']].mean().plot(kind="bar", rot=0)
```




    <AxesSubplot:xlabel='기준_분기_코드'>




    
![png](/assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_135_1.png)
    


* 분기별로 항상 40대,50대의 매출 비율이 가장 높다.
<!-- * 아무래도 소득이 일정해서 그럴까? 아니면 돌봐야 하는 가족들 때문에? -->


```python
df.groupby("기준_분기_코드")[['연령대_10_매출_금액','연령대_20_매출_금액','연령대_30_매출_금액','연령대_40_매출_금액','연령대_50_매출_금액','연령대_60_이상_매출_금액']].mean().plot(kind="bar", rot=0)
```




    <AxesSubplot:xlabel='기준_분기_코드'>




    
![png](/assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_137_1.png)
    


# 매출 비율, 매출 금액, 매출 건수의 합계를 서로 비교해 보기.


```python
week_ratio = df[["자치구","월요일_매출_비율", "화요일_매출_비율"  , "수요일_매출_비율", "목요일_매출_비율", "금요일_매출_비율","토요일_매출_비율" ,"일요일_매출_비율"]]
a = pd.pivot_table(data=week_ratio,index="자치구", aggfunc=np.sum)
px.line(a)
```



```python
week_sale=df[["자치구","월요일_매출_금액","화요일_매출_금액","수요일_매출_금액","목요일_매출_금액","금요일_매출_금액","토요일_매출_금액","일요일_매출_금액"]]
e = pd.pivot_table(data=week_sale, index="자치구", aggfunc=np.sum)
px.line(e)
```





```python
week_sale_count = df[["자치구",'월요일_매출_건수','화요일_매출_건수','수요일_매출_건수','목요일_매출_건수','금요일_매출_건수','토요일_매출_건수','일요일_매출_건수']]
i = pd.pivot_table(data=week_sale_count, index="자치구", aggfunc=np.sum)
px.line(i)
```




```python
time_ratio = df[["자치구","시간대_00~06_매출_비율","시간대_06~11_매출_비율","시간대_11~14_매출_비율","시간대_14~17_매출_비율","시간대_17~21_매출_비율","시간대_21~24_매출_비율"]]
b = pd.pivot_table(data=time_ratio, index="자치구", aggfunc=np.sum)
px.line(b)
```





```python
time_sale = df[["자치구",'시간대_00~06_매출_금액','시간대_06~11_매출_금액','시간대_11~14_매출_금액','시간대_14~17_매출_금액','시간대_17~21_매출_금액','시간대_21~24_매출_금액']]
f = pd.pivot_table(data=time_sale,index="자치구", aggfunc=np.sum)
px.line(f)
```




```python
time_sale_count = df[["자치구",'시간대_건수~06_매출_건수','시간대_건수~11_매출_건수','시간대_건수~14_매출_건수','시간대_건수~17_매출_건수','시간대_건수~21_매출_건수','시간대_건수~24_매출_건수']]
j = pd.pivot_table(data=time_sale_count, index="자치구", aggfunc=np.sum)
px.line(j)
```





```python
gender_ratio = df[["자치구","남성_매출_비율","여성_매출_비율"]]
c = pd.pivot_table(data=gender_ratio, index="자치구", aggfunc=np.sum)
px.line(c)
```




```python
gender_sale = df[["자치구",'남성_매출_금액','여성_매출_금액']]
g = pd.pivot_table(data=gender_sale, index="자치구", aggfunc=np.sum)
px.line(g)
```





```python
gender_sale_count = df[["자치구",'남성_매출_건수','여성_매출_건수']]
k = pd.pivot_table(data=gender_sale_count, index="자치구", aggfunc=np.sum)
px.line(k)
```





```python
age_ratio = df[["자치구","연령대_10_매출_비율","연령대_20_매출_비율","연령대_30_매출_비율","연령대_40_매출_비율","연령대_50_매출_비율","연령대_60_이상_매출_비율"]]
d = pd.pivot_table(data=age_ratio, index="자치구", aggfunc=np.sum)
px.line(d)
```





```python
age_sale = df[["자치구",'연령대_10_매출_금액','연령대_20_매출_금액','연령대_30_매출_금액','연령대_40_매출_금액','연령대_50_매출_금액','연령대_60_이상_매출_금액']]
h = pd.pivot_table(data=age_sale, index="자치구", aggfunc=np.sum)
px.line(h)
```




```python
age_sale_count = df[["자치구",'연령대_10_매출_건수','연령대_20_매출_건수','연령대_30_매출_건수','연령대_40_매출_건수','연령대_50_매출_건수','연령대_60_이상_매출_건수']]
l = pd.pivot_table(data=age_sale_count, index="자치구", aggfunc=np.sum)
px.line(l)
```


 ### 데이터의 경도와 위도를 스캐터로 찍어 보니 서울 지도의 형태를 띄고 있다.


```python
sns.scatterplot(data=df, x="경도", y="위도", hue="자치구")
```




    <AxesSubplot:xlabel='경도', ylabel='위도'>




    
![png](/assets/images/source_images/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_files/8%EC%A1%B0_%EB%AF%B8%EB%93%9C%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8_88%EB%8F%8C%EC%95%84%EB%8B%A4%EB%8B%88%EC%A1%B0_152_1.png)
    

